<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Linux version 5.2.0">
  <meta charset="utf-8">
  <meta name="generator" content="ReSpec 20.1.1">
  <meta name="viewport" content=
  "width=device-width, initial-scale=1, shrink-to-fit=no">
  <style>
  /* --- EXAMPLES --- */
  div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
  }
  div.example-title span {
    text-transform: uppercase;
  }
  aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
  }
  div.illegal-example { color: red }
  div.illegal-example p { color: black }
  aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
  }

  aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
  }
  aside.example div.example div.example-title {
    color: #999;
  }
  </style>
  <style>
  /* --- ISSUES/NOTES --- */
  div.issue-title, div.note-title , div.ednote-title, div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
  }
  div.issue-title { color: #e05252; }
  div.note-title, div.ednote-title { color: #2b2; }
  div.warning-title { color: #f22; }
  div.issue-title span, div.note-title span, div.ednote-title span, div.warning-title span {
    text-transform: uppercase;
  }
  div.note, div.issue, div.ednote, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
  }
  .note > p:first-child, .ednote > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
  .issue, .note, .ednote, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
  }
  div.issue, div.note , div.ednote,  div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
  }
  span.note, span.ednote, span.issue, span.warning { padding: .1em .5em .15em; }

  .issue {
    border-color: #e05252;
    background: #fbe9e9;
  }
  .note, .ednote {
    border-color: #52e052;
    background: #e9fbe9;
  }

  .warning {
    border-color: #f11;
    border-width: .2em;
    border-style: solid;
    background: #fbe9e9;
  }

  .warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
  }

  li.task-list-item {
    list-style: none;
  }

  input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
  }
  </style>
  <style>
  /* --- WEB IDL --- */

  pre.idl {
  padding: 1em;
  }

  .respec-idl-separator {
  padding: 0 0 0.4cm 0;
  }

  .respec-idl-separator:last-child {
  padding: 0;
  }

  @media print {
  pre.idl {
    white-space: pre-wrap;
  }
  }

  pre.idl::before {
  content: "WebIDL";
  display: block;
  width: 150px;
  background: #90b8de;
  color: #fff;
  font-family: sans-serif;
  font-weight: bold;
  margin: -1em 0 1em -1em;
  height: 28px;
  line-height: 28px;  
  }

  .idlType {
  color: #ff4500;
  font-weight: bold;
  text-decoration: none;
  }


  /*.idlModule*/


  /*.idlModuleID*/


  /*.idlInterface*/

  .idlInterfaceID,
  .idlDictionaryID,
  .idlCallbackID,
  .idlEnumID {
  font-weight: bold;
  color: #005a9c;
  }

  a.idlEnumItem {
  color: #000;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
  }

  .idlSuperclass {
  font-style: italic;
  color: #005a9c;
  }


  /*.idlAttribute*/

  .idlAttrType,
  .idlFieldType,
  .idlMemberType {
  color: #005a9c;
  }

  .idlAttrName,
  .idlFieldName,
  .idlMemberName {
  color: #ff4500;
  }

  .idlAttrName a,
  .idlFieldName a,
  .idlMemberName a {
  color: #ff4500;
  border-bottom: 1px dotted #ff4500;
  text-decoration: none;
  }


  /*.idlMethod*/

  .idlMethType,
  .idlCallbackType {
  color: #005a9c;
  }

  .idlMethName {
  color: #ff4500;
  }

  .idlMethName a {
  color: #ff4500;
  border-bottom: 1px dotted #ff4500;
  text-decoration: none;
  }


  /*.idlCtor*/

  .idlCtorName {
  color: #ff4500;
  }

  .idlCtorName a {
  color: #ff4500;
  border-bottom: 1px dotted #ff4500;
  text-decoration: none;
  }


  /*.idlParam*/

  .idlParamType {
  color: #005a9c;
  }

  .idlParamName,
  .idlDefaultValue {
  font-style: italic;
  }

  .extAttr {
  color: #666;
  }


  /*.idlSectionComment*/

  .idlSectionComment {
  color: gray;
  }


  /*.idlIterable*/

  .idlIterableKeyType,
  .idlIterableValueType {
  color: #005a9c;
  }


  /*.idlMaplike*/

  .idlMaplikeKeyType,
  .idlMaplikeValueType {
  color: #005a9c;
  }


  /*.idlConst*/

  .idlConstType {
  color: #005a9c;
  }

  .idlConstName {
  color: #ff4500;
  }

  .idlConstName a {
  color: #ff4500;
  border-bottom: 1px dotted #ff4500;
  text-decoration: none;
  }


  /*.idlException*/

  .idlExceptionID {
  font-weight: bold;
  color: #c00;
  }

  .idlTypedefID,
  .idlTypedefType {
  color: #005a9c;
  }

  .idlRaises,
  .idlRaises a.idlType,
  .idlRaises a.idlType code,
  .excName a,
  .excName a code {
  color: #c00;
  font-weight: normal;
  }

  .excName a {
  font-family: monospace;
  }

  .idlRaises a.idlType,
  .excName a.idlType {
  border-bottom: 1px dotted #c00;
  }

  .excGetSetTrue,
  .excGetSetFalse,
  .prmNullTrue,
  .prmNullFalse,
  .prmOptTrue,
  .prmOptFalse {
  width: 45px;
  text-align: center;
  }

  .excGetSetTrue,
  .prmNullTrue,
  .prmOptTrue {
  color: #0c0;
  }

  .excGetSetFalse,
  .prmNullFalse,
  .prmOptFalse {
  color: #c00;
  }

  .idlImplements a, .idlIncludes a {
  font-weight: bold;
  }

  dl.attributes,
  dl.methods,
  dl.constants,
  dl.constructors,
  dl.fields,
  dl.dictionary-members {
  margin-left: 2em;
  }

  .attributes dt,
  .methods dt,
  .constants dt,
  .constructors dt,
  .fields dt,
  .dictionary-members dt {
  font-weight: normal;
  }

  .attributes dt code,
  .methods dt code,
  .constants dt code,
  .constructors dt code,
  .fields dt code,
  .dictionary-members dt code {
  font-weight: bold;
  color: #000;
  font-family: monospace;
  }

  .attributes dt code,
  .fields dt code,
  .dictionary-members dt code {
  background: #ffffd2;
  }

  .attributes dt .idlAttrType code,
  .fields dt .idlFieldType code,
  .dictionary-members dt .idlMemberType code {
  color: #005a9c;
  background: transparent;
  font-family: inherit;
  font-weight: normal;
  font-style: italic;
  }

  .methods dt code {
  background: #d9e6f8;
  }

  .constants dt code {
  background: #ddffd2;
  }

  .constructors dt code {
  background: #cfc;
  }

  .attributes dd,
  .methods dd,
  .constants dd,
  .constructors dd,
  .fields dd,
  .dictionary-members dd {
  margin-bottom: 1em;
  }

  table.parameters,
  table.exceptions {
  border-spacing: 0;
  border-collapse: collapse;
  margin: 0.5em 0;
  width: 100%;
  }

  table.parameters {
  border-bottom: 1px solid #90b8de;
  }

  table.exceptions {
  border-bottom: 1px solid #deb890;
  }

  .parameters th,
  .exceptions th {
  color: inherit;
  padding: 3px 5px;
  text-align: left;
  font-weight: normal;
  }

  .parameters th {
  color: #fff;
  background: #005a9c;
  }

  .exceptions th {
  background: #deb890;
  }

  .parameters td,
  .exceptions td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
  vertical-align: top;
  }

  .parameters tr:first-child td,
  .exceptions tr:first-child td {
  border-top: none;
  }

  .parameters td.prmName,
  .exceptions td.excName,
  .exceptions td.excCodeName {
  width: 100px;
  }

  .parameters td.prmType {
  width: 120px;
  }

  table.exceptions table {
  border-spacing: 0;
  border-collapse: collapse;
  width: 100%;
  }

  .respec-button-copy-paste:focus {
  text-decoration: none;
  border-color: #51a7e8;
  outline: none;
  box-shadow: 0 0 5px rgba(81, 167, 232, 0.5);
  }

  .respec-button-copy-paste:focus:hover,
  .respec-button-copy-paste.selected:focus {
  border-color: #51a7e8;
  }

  .respec-button-copy-paste:hover,
  .respec-button-copy-paste:active,
  .respec-button-copy-paste.zeroclipboard-is-hover,
  .respec-button-copy-paste.zeroclipboard-is-active {
  text-decoration: none;
  background-color: #ddd;
  background-image: linear-gradient(#eee, #ddd);
  border-color: #ccc;
  }

  .respec-button-copy-paste:active,
  .respec-button-copy-paste.selected,
  .respec-button-copy-paste.zeroclipboard-is-active {
  background-color: #dcdcdc;
  background-image: none;
  border-color: #b5b5b5;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15)
  }

  .respec-button-copy-paste.selected:hover {
  background-color: #cfcfcf;
  }

  .respec-button-copy-paste:disabled,
  .respec-button-copy-paste:disabled:hover,
  .respec-button-copy-paste.disabled,
  .respec-button-copy-paste.disabled:hover {
  color: rgba(102, 102, 102, 0.5);
  cursor: default;
  background-color: rgba(229, 229, 229, 0.5);
  background-image: none;
  border-color: rgba(197, 197, 197, 0.5);
  box-shadow: none;
  }
  </style>
  <title>Web of Things (WoT) Scripting API</title>
  <style id="respec-mainstyle">
  /*****************************************************************
  * ReSpec 3 CSS
  * Robin Berjon - http://berjon.com/
  *****************************************************************/

  /* Override code highlighter background */
  .hljs {
  background: transparent !important;
  }

  /* --- INLINES --- */
  h1 abbr,
  h2 abbr,
  h3 abbr,
  h4 abbr,
  h5 abbr,
  h6 abbr,
  a abbr {
  border: none;
  }

  dfn {
  font-weight: bold;
  }

  a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
  }

  a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
  }

  a.bibref {
  text-decoration: none;
  }

  cite .bibref {
  font-style: normal;
  }

  code {
  color: #c83500;
  }

  th code {
  color: inherit;
  }

  /* --- TOC --- */

  .toc a,
  .tof a {
  text-decoration: none;
  }

  a .secno,
  a .figno {
  color: #000;
  }

  ul.tof,
  ol.tof {
  list-style: none outside none;
  }

  .caption {
  margin-top: 0.5em;
  font-style: italic;
  }

  /* --- TABLE --- */

  table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
  }

  .simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
  }

  .simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
  }

  .simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
  }

  .simple tr:nth-child(even) {
  background: #f0f6ff;
  }

  /* --- DL --- */

  .section dd > p:first-child {
  margin-top: 0;
  }

  .section dd > p:last-child {
  margin-bottom: 0;
  }

  .section dd {
  margin-bottom: 1em;
  }

  .section dl.attrs dd,
  .section dl.eldef dd {
  margin-bottom: 0;
  }

  #issue-summary > ul,
  .respec-dfn-list {
  column-count: 2;
  }

  #issue-summary li,
  .respec-dfn-list li {
  list-style: none;
  }

  details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
  }

  details.respec-tests-details > * {
  padding-right: 2em;
  }

  details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: .3em;
  background-color: white;
  padding-bottom: .5em;
  }

  details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
  }

  details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
  }

  details.respec-tests-details > li {
  padding-left: 1em;
  }

  @media print {
  .removeOnSave {
    display: none;
  }
  }
  </style>
  <style>
  /*

  github.com style (c) Vasily Polovnyov <vast@whiteants.net>

  */

  .hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
  }

  .hljs-comment,
  .hljs-quote {
  color: #998;
  font-style: italic;
  }

  .hljs-keyword,
  .hljs-selector-tag,
  .hljs-subst {
  color: #333;
  font-weight: bold;
  }

  .hljs-number,
  .hljs-literal,
  .hljs-variable,
  .hljs-template-variable,
  .hljs-tag .hljs-attr {
  color: #008080;
  }

  .hljs-string,
  .hljs-doctag {
  color: #d14;
  }

  .hljs-title,
  .hljs-section,
  .hljs-selector-id {
  color: #900;
  font-weight: bold;
  }

  .hljs-subst {
  font-weight: normal;
  }

  .hljs-type,
  .hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
  }

  .hljs-tag,
  .hljs-name,
  .hljs-attribute {
  color: #000080;
  font-weight: normal;
  }

  .hljs-regexp,
  .hljs-link {
  color: #009926;
  }

  .hljs-symbol,
  .hljs-bullet {
  color: #990073;
  }

  .hljs-built_in,
  .hljs-builtin-name {
  color: #0086b3;
  }

  .hljs-meta {
  color: #999;
  font-weight: bold;
  }

  .hljs-deletion {
  background: #fdd;
  }

  .hljs-addition {
  background: #dfd;
  }

  .hljs-emphasis {
  font-style: italic;
  }

  .hljs-strong {
  font-weight: bold;
  }
  </style>
  <link rel="stylesheet" href=
  "https://www.w3.org/StyleSheets/TR/2016/W3C-WD">
  <link rel="canonical" href=
  "https://www.w3.org/TR/wot-scripting-api/">
  <script id="initialUserConfig" type="application/json">
  {
  "specStatus": "WD",
  "shortName": "wot-scripting-api",
  "copyrightStart": 2017,
  "noLegacyStyle": true,
  "publishDate": "",
  "previousPublishDate": "2017-09-14",
  "previousMaturity": "FPWD",
  "edDraftURI": "https://w3c.github.io/wot-scripting-api/",
  "crEnd": "",
  "inlineCSS": true,
  "noIDLIn": true,
  "format": "markdown",
  "editors": [
    {
      "name": "Zoltan Kis",
      "company": "Intel",
      "companyURL": "https://www.intel.com/"
    },
    {
      "name": "Kazuaki Nimura",
      "company": "Fujitsu Ltd.",
      "companyURL": "https://www.fujitsu.com/"
    },
    {
      "name": "Daniel Peintner",
      "company": "Siemens AG",
      "companyURL": "https://www.siemens.com/"
    },
    {
      "name": "Johannes Hund",
      "note": "Former Editor, when at Siemens AG"
    }
  ],
  "wg": "Web of Things Working Group",
  "wgURI": "https://www.w3.org/WoT/WG/",
  "wgPublicList": "public-wot-wg",
  "issueBase": "https://www.github.com/w3c/wot-scripting-api/issues/",
  "githubAPI": "https://api.github.com/repos/w3c/wot-scripting-api",
  "otherLinks": [
    {
      "key": "Contributors",
      "data": [
        {
          "value": "In the GitHub repository",
          "href": "https://github.com/w3c/wot-scripting-api/graphs/contributors"
        }
      ]
    },
    {
      "key": "Repository",
      "data": [
        {
          "value": "We are on GitHub",
          "href": "https://github.com/w3c/wot-scripting-api"
        },
        {
          "value": "File a bug",
          "href": "https://github.com/w3c/wot-scripting-api/issues"
        }
      ]
    }
  ],
  "localBiblio": {
    "WOT-ARCHITECTURE": {
      "href": "https://w3c.github.io/wot-architecture/",
      "title": "Web of Things Architecture",
      "publisher": "W3C",
      "date": "20 August 2017"
    },
    "WOT-TD": {
      "href": "https://w3c.github.io/wot-thing-description/",
      "title": "WoT Thing Description ",
      "publisher": "W3C",
      "date": "20 August 2017"
    },
    "WOT-PROTOCOL-BINDINGS": {
      "href": "https://w3c.github.io/wot-binding-templates/",
      "title": "Web of Things Protocol Binding Templates",
      "publisher": "W3C",
      "date": "20 August 2017"
    },
    "WOT-PRACTICES": {
      "href": "http://w3c.github.io/wot/current-practices/wot-practices.html",
      "title": "Web of Things Current Practices",
      "publisher": "W3C",
      "date": "6 February 2017"
    },
    "TYPESCRIPT": {
      "href": "https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md",
      "title": "TypeScript Language Specification",
      "publisher": "Microsoft",
      "date": "1 October 2012"
    },
    "WEBAPPSEC": {
      "href": "https://w3c.github.io/webappsec/specs/powerfulfeatures",
      "title": "Secure Contexts",
      "publisher": "W3C",
      "date": "17 July 2015"
    }
  },
  "publishISODate": "2018-04-05T00:00:00.000Z",
  "generatedSubtitle": "Working Draft 05 April 2018"
  }
  </script>
  <meta name="description" content=
  "The Web of Things (WoT) provides layered interoperability between Things by using the WoT Interfaces.">
</head>
<body class="h-entry toc-inline">
  <div class="head">
    <a href="https://www.w3.org/" class="logo"><img alt="W3C" src=
    "https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"
    height="48"></a>
    <h1 id="title" class="title p-name">Web of Things (WoT)
    Scripting API</h1>
    <h2 id="w3c-working-draft-05-april-2018"><abbr title=
    "World Wide Web Consortium">W3C</abbr> Working Draft
    <time class="dt-published" datetime="2018-04-05">5 April
    2018</time></h2>
    <dl>
      <dt>This version:</dt>
      <dd>
        <a class="u-url" href=
        "https://www.w3.org/TR/2018/WD-wot-scripting-api-20180405/">
        https://www.w3.org/TR/2018/WD-wot-scripting-api-20180405/</a>
      </dd>
      <dt>Latest published version:</dt>
      <dd>
        <a href=
        "https://www.w3.org/TR/wot-scripting-api/">https://www.w3.org/TR/wot-scripting-api/</a>
      </dd>
      <dt>Latest editor's draft:</dt>
      <dd>
        <a href=
        "https://w3c.github.io/wot-scripting-api/">https://w3c.github.io/wot-scripting-api/</a>
      </dd>
      <dt>Previous version:</dt>
      <dd>
        <a class="u-url" href=
        "https://www.w3.org/TR/2017/WD-wot-scripting-api-20170914/">
        https://www.w3.org/TR/2017/WD-wot-scripting-api-20170914/</a>
      </dd>
      <dt>Editors:</dt>
      <dd class="p-author h-card vcard">
        <span class="p-name fn">Zoltan Kis</span> (<a class=
        "p-org org h-org h-card" href=
        "https://www.intel.com/">Intel</a>)
      </dd>
      <dd class="p-author h-card vcard">
        <span class="p-name fn">Kazuaki Nimura</span> (<a class=
        "p-org org h-org h-card" href=
        "https://www.fujitsu.com/">Fujitsu Ltd.</a>)
      </dd>
      <dd class="p-author h-card vcard">
        <span class="p-name fn">Daniel Peintner</span> (<a class=
        "p-org org h-org h-card" href=
        "https://www.siemens.com/">Siemens AG</a>)
      </dd>
      <dd class="p-author h-card vcard"><span class=
      "p-name fn">Johannes Hund</span> (Former Editor, when at
      Siemens AG)</dd>
      <dt>Contributors:</dt>
      <dd>
        <a href=
        "https://github.com/w3c/wot-scripting-api/graphs/contributors">
        In the GitHub repository</a>
      </dd>
      <dt>Repository:</dt>
      <dd>
        <a href="https://github.com/w3c/wot-scripting-api">We are
        on GitHub</a>
      </dd>
      <dd>
        <a href=
        "https://github.com/w3c/wot-scripting-api/issues">File a
        bug</a>
      </dd>
    </dl>
    <p class="copyright"><a href=
    "https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    © 2017-2018 <a href="https://www.w3.org/"><abbr title=
    "World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
    (<a href="https://www.csail.mit.edu/"><abbr title=
    "Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title=
    "European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="https://www.keio.ac.jp/">Keio</a>, <a href=
    "http://ev.buaa.edu.cn/">Beihang</a>). <abbr title=
    "World Wide Web Consortium">W3C</abbr> <a href=
    "https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
    liability</a>, <a href=
    "https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
    trademark</a> and <a rel="license" href=
    "https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">
    permissive document license</a> rules apply.</p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory">
    <h2 id="abstract-0">Abstract</h2>
    <p>The <a href="#dfn-web-of-things" class="internalDFN"
    data-link-type="dfn">Web of Things</a> (WoT) provides layered
    interoperability between <a href="#dfn-things" class=
    "internalDFN" data-link-type="dfn">Things</a> by using the
    <a href="#dfn-wot-interface" class="internalDFN"
    data-link-type="dfn">WoT Interface</a>s.</p>
    <p>This specification describes a programming interface
    representing the <a href="#dfn-wot-interface" class=
    "internalDFN" data-link-type="dfn">WoT Interface</a> that
    allows scripts run on a <a href="#dfn-things" class=
    "internalDFN" data-link-type="dfn">Thing</a> to discover and
    consume (retrieve) other <a href="#dfn-things" class=
    "internalDFN" data-link-type="dfn">Thing</a>s and to expose
    <a href="#dfn-things" class="internalDFN" data-link-type=
    "dfn">Things</a> characterized by <a href=
    "#dfn-wot-interactions" class="internalDFN" data-link-type=
    "dfn">WoT Interactions</a>, i.e. <a href="#dfn-properties"
    class="internalDFN" data-link-type="dfn">Properties</a>,
    <a href="#dfn-actions" class="internalDFN" data-link-type=
    "dfn">Actions</a> and <a href="#dfn-events" class="internalDFN"
    data-link-type="dfn">Events</a>.</p>
    <p>Scripting is an optional "convenience" building block in WoT
    and it is typically used in gateways that are able to run a
    <a href="#dfn-wot-runtime" class="internalDFN" data-link-type=
    "dfn">WoT Runtime</a> and <a href=
    "https://github.com/w3c/wot-scripting-api/tree/master/applications/script-manager">
    script management</a>, providing a convenient way to extend WoT
    support to new types of endpoints and implement WoT
    applications like <a href=
    "https://github.com/w3c/wot-scripting-api/tree/master/applications/thing-directory">
    Thing Directory</a>.</p>
  </section>
  <section id="sotd" class="introductory">
    <h2 id="status-of-this-document">Status of This Document</h2>
    <p><em>This section describes the status of this document at
    the time of its publication. Other documents may supersede this
    document. A list of current <abbr title=
    "World Wide Web Consortium">W3C</abbr> publications and the
    latest revision of this technical report can be found in the
    <a href="https://www.w3.org/TR/"><abbr title=
    "World Wide Web Consortium">W3C</abbr> technical reports
    index</a> at https://www.w3.org/TR/.</em></p>
    <p>Implementers need to be aware that this specification is
    considered unstable. Vendors interested in implementing this
    specification before it eventually reaches the Candidate
    Recommendation phase should subscribe to the <a href=
    "https://github.com/w3c/wot-scripting-api">repository</a> and
    take part in the discussions.</p>
    <div class="ednote">
      <div role="heading" class="ednote-title marker" id="h-ednote"
      aria-level="3">
        <span>Editor's note</span><span style=
        "text-transform: none">: The W3C WoT WG is asking for
        feedback</span>
      </div>
      <p class="">Please contribute to this draft using the
      <a href="https://github.com/w3c/wot-scripting-api/issues">GitHub
      Issue</a> feature of the <a href=
      "https://github.com/w3c/wot-scripting-api/">WoT Scripting
      API</a> repository. For feedback on security and privacy
      considerations, please use the <a href=
      "https://github.com/w3c/wot-security/issues">WoT Security and
      Privacy</a> Issues.</p>
    </div>
    <p>This document was published by the <a href=
    "https://www.w3.org/WoT/WG/">Web of Things Working Group</a> as
    an Editor's Draft. Comments regarding this document are
    welcome. Please send them to <a href=
    "mailto:public-wot-wg@w3.org">public-wot-wg@w3.org</a>
    (<a href="mailto:public-wot-wg-request@w3.org?subject=subscribe">subscribe</a>,
    <a href=
    "https://lists.w3.org/Archives/Public/public-wot-wg/">archives</a>).</p>
    <p>Changes from the previous publication can be found in
    <a href="#Changes">Appendix A</a>. A <a href=
    "diff.html">diff-marked version</a> of this document is also
    available for comparison purposes.</p>
    <p>Publication as a Working Draft does not imply endorsement by
    the <abbr title="World Wide Web Consortium">W3C</abbr>
    Membership. This is a draft document and may be updated,
    replaced or obsoleted by other documents at any time. It is
    inappropriate to cite this document as other than work in
    progress.</p>
    <p>This document was produced by a group operating under the
    <a href=
    "https://www.w3.org/Consortium/Patent-Policy/"><abbr title=
    "World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
    <a rel="disclosure" href=
    "https://www.w3.org/2004/01/pp-impl/95969/status">public list
    of any patent disclosures</a> made in connection with the
    deliverables of the group; that page also includes instructions
    for disclosing a patent. An individual who has actual knowledge
    of a patent which the individual believes contains <a href=
    "https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with
    <a href=
    "https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section
    6 of the <abbr title="World Wide Web Consortium">W3C</abbr>
    Patent Policy</a>.</p>
    <p>This document is governed by the <a id=
    "w3c_process_revision" href=
    "https://www.w3.org/2018/Process-20180201/">1 February 2018
    <abbr title="World Wide Web Consortium">W3C</abbr> Process
    Document</a>.</p>
  </section>
  <nav id="toc">
    <h2 class="introductory" id="table-of-contents">Table of
    Contents</h2>
    <ol class="toc">
      <li class="tocline">
        <a href="#introduction" class="tocxref"><span class=
        "secno">1.</span> Introduction</a>
      </li>
      <li class="tocline">
        <a href="#use-cases" class="tocxref"><span class=
        "secno">2.</span> Use Cases</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#discovery" class="tocxref"><span class=
            "secno">2.1</span> Discovery</a>
          </li>
          <li class="tocline">
            <a href="#consuming-a-thing" class=
            "tocxref"><span class="secno">2.2</span> Consuming a
            Thing</a>
          </li>
          <li class="tocline">
            <a href="#exposing-a-thing" class=
            "tocxref"><span class="secno">2.3</span> Exposing a
            Thing</a>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href="#the-wot-object" class="tocxref"><span class=
        "secno">3.</span> The <span data-dfn-for="" data-dfn-type=
        "dfn" data-idl="" data-title="WoT"><code>WoT</code></span>
        object</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#the-discover-method" class=
            "tocxref"><span class="secno">3.1</span> The
            <span data-dfn-for="wot" data-dfn-type="dfn" data-idl=
            "" data-title="discover()" data-lt=
            "discover()|discover"><code>discover()</code></span>
            method</a>
            <ol class="toc">
              <li class="tocline">
                <a href="#the-discoverymethod-enumeration" class=
                "tocxref"><span class="secno">3.1.1</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title=
                "DiscoveryMethod"><code>DiscoveryMethod</code></span>
                enumeration</a>
              </li>
              <li class="tocline">
                <a href="#the-thingfilter-dictionary" class=
                "tocxref"><span class="secno">3.1.2</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title=
                "ThingFilter"><code>ThingFilter</code></span>
                dictionary</a>
              </li>
            </ol>
          </li>
          <li class="tocline">
            <a href="#the-fetch-method" class=
            "tocxref"><span class="secno">3.2</span> The
            <span data-dfn-for="wot" data-dfn-type="dfn" data-idl=
            "" data-title="fetch()" data-lt=
            "fetch()|fetch"><code>fetch()</code></span> method</a>
          </li>
          <li class="tocline">
            <a href="#the-thingdescription-type" class=
            "tocxref"><span class="secno">3.3</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "ThingDescription"><code>ThingDescription</code></span>
            type</a>
          </li>
          <li class="tocline">
            <a href="#the-consume-method" class=
            "tocxref"><span class="secno">3.4</span> The
            <span data-dfn-for="wot" data-dfn-type="dfn" data-idl=
            "" data-title="consume()" data-lt=
            "consume()|consume"><code>consume()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-produce-method" class=
            "tocxref"><span class="secno">3.5</span> The
            <span data-dfn-for="wot" data-dfn-type="dfn" data-idl=
            "" data-title="produce()" data-lt=
            "produce()|produce"><code>produce()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-thingmodel-type" class=
            "tocxref"><span class="secno">3.6</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title="ThingModel"><code>ThingModel</code></span>
            type</a>
          </li>
          <li class="tocline">
            <a href="#the-semanticannotations-dictionary" class=
            "tocxref"><span class="secno">3.7</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "SemanticAnnotations"><code>SemanticAnnotations</code></span>
            dictionary</a>
          </li>
          <li class="tocline">
            <a href="#the-semantictype-dictionary" class=
            "tocxref"><span class="secno">3.8</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "SemanticType"><code>SemanticType</code></span>
            dictionary</a>
          </li>
          <li class="tocline">
            <a href="#the-semanticmetadata-dictionary" class=
            "tocxref"><span class="secno">3.9</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "SemanticMetadata"><code>SemanticMetadata</code></span>
            dictionary</a>
          </li>
          <li class="tocline">
            <a href="#the-thingtemplate-dictionary" class=
            "tocxref"><span class="secno">3.10</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "ThingTemplate"><code>ThingTemplate</code></span>
            dictionary</a>
          </li>
          <li class="tocline">
            <a href="#examples" class="tocxref"><span class=
            "secno">3.11</span> Examples</a>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href="#the-consumedthing-interface" class=
        "tocxref"><span class="secno">4.</span> The
        <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
        data-title=
        "ConsumedThing"><code>ConsumedThing</code></span>
        interface</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#the-name-property" class=
            "tocxref"><span class="secno">4.1</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="name"><code>name</code></span>
            property</a>
          </li>
          <li class="tocline">
            <a href="#the-getthingdescription-method" class=
            "tocxref"><span class="secno">4.2</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="getThingDescription()" data-lt=
            "getthingdescription()|getThingDescription"><code>getThingDescription()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-readproperty-method" class=
            "tocxref"><span class="secno">4.3</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="readProperty()" data-lt=
            "readproperty()|readProperty"><code>readProperty()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-writeproperty-method" class=
            "tocxref"><span class="secno">4.4</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="writeProperty()" data-lt=
            "writeproperty()|writeProperty"><code>writeProperty()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-invokeaction-method" class=
            "tocxref"><span class="secno">4.5</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="invokeAction()" data-lt=
            "invokeaction()|invokeAction"><code>invokeAction()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-onpropertychange-method" class=
            "tocxref"><span class="secno">4.6</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="onPropertyChange()" data-lt=
            "onpropertychange()|onPropertyChange"><code>onPropertyChange()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-onevent-method" class=
            "tocxref"><span class="secno">4.7</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="onEvent()" data-lt=
            "onevent()|onEvent"><code>onEvent()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-ontdchange-method" class=
            "tocxref"><span class="secno">4.8</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="onTDChange()" data-lt=
            "ontdchange()|onTDChange"><code>onTDChange()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#examples-0" class="tocxref"><span class=
            "secno">4.9</span> Examples</a>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href="#the-exposedthing-interface" class=
        "tocxref"><span class="secno">5.</span> The
        <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
        data-title="ExposedThing"><code>ExposedThing</code></span>
        interface</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#the-start-method" class=
            "tocxref"><span class="secno">5.1</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="start()" data-lt=
            "start()|start"><code>start()</code></span> method</a>
          </li>
          <li class="tocline">
            <a href="#the-stop-method" class="tocxref"><span class=
            "secno">5.2</span> The <span data-dfn-for=
            "exposedthing" data-dfn-type="dfn" data-idl=""
            data-title="stop()" data-lt=
            "stop()|stop"><code>stop()</code></span> method</a>
          </li>
          <li class="tocline">
            <a href="#the-register-method" class=
            "tocxref"><span class="secno">5.3</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="register()" data-lt=
            "register()|register"><code>register()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-unregister-method" class=
            "tocxref"><span class="secno">5.4</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="unregister()" data-lt=
            "unregister()|unregister"><code>unregister()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-emitevent-method" class=
            "tocxref"><span class="secno">5.5</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="emitEvent()" data-lt=
            "emitevent()|emitEvent"><code>emitEvent()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-dataschema-type" class=
            "tocxref"><span class="secno">5.6</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title="DataSchema"><code>DataSchema</code></span>
            type</a>
          </li>
          <li class="tocline">
            <a href="#the-addproperty-method" class=
            "tocxref"><span class="secno">5.7</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="addProperty()" data-lt=
            "addproperty()|addProperty"><code>addProperty()</code></span>
            method</a>
            <ol class="toc">
              <li class="tocline">
                <a href="#the-thingproperty-dictionary" class=
                "tocxref"><span class="secno">5.7.1</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title=
                "ThingProperty"><code>ThingProperty</code></span>
                dictionary</a>
              </li>
            </ol>
          </li>
          <li class="tocline">
            <a href="#the-removeproperty-method" class=
            "tocxref"><span class="secno">5.8</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="removeProperty()" data-lt=
            "removeproperty()|removeProperty"><code>removeProperty()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-addaction-method" class=
            "tocxref"><span class="secno">5.9</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="addAction()" data-lt=
            "addaction()|addAction"><code>addAction()</code></span>
            method</a>
            <ol class="toc">
              <li class="tocline">
                <a href="#the-thingaction-dictionary" class=
                "tocxref"><span class="secno">5.9.1</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title=
                "ThingAction"><code>ThingAction</code></span>
                dictionary</a>
              </li>
            </ol>
          </li>
          <li class="tocline">
            <a href="#the-removeaction-method" class=
            "tocxref"><span class="secno">5.10</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="removeAction()" data-lt=
            "removeaction()|removeAction"><code>removeAction()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-addevent-method" class=
            "tocxref"><span class="secno">5.11</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="addEvent()" data-lt=
            "addevent()|addEvent"><code>addEvent()</code></span>
            method</a>
            <ol class="toc">
              <li class="tocline">
                <a href="#the-thingevent-dictionary" class=
                "tocxref"><span class="secno">5.11.1</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title=
                "ThingEvent"><code>ThingEvent</code></span>
                dictionary</a>
              </li>
            </ol>
          </li>
          <li class="tocline">
            <a href="#the-removeevent-method" class=
            "tocxref"><span class="secno">5.12</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="removeEvent()" data-lt=
            "removeevent()|removeEvent"><code>removeEvent()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-propertyreadhandler-callback" class=
            "tocxref"><span class="secno">5.13</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "PropertyReadHandler"><code>PropertyReadHandler</code></span>
            callback</a>
          </li>
          <li class="tocline">
            <a href="#the-propertywritehandler-callback" class=
            "tocxref"><span class="secno">5.14</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "PropertyWriteHandler"><code>PropertyWriteHandler</code></span>
            callback</a>
          </li>
          <li class="tocline">
            <a href="#the-actionhandler-callback" class=
            "tocxref"><span class="secno">5.15</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "ActionHandler"><code>ActionHandler</code></span>
            callback</a>
          </li>
          <li class="tocline">
            <a href="#the-setpropertyreadhandler-method" class=
            "tocxref"><span class="secno">5.16</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="setPropertyReadHandler()"
            data-lt=
            "setpropertyreadhandler()|setPropertyReadHandler"><code>
            setPropertyReadHandler()</code></span> method</a>
          </li>
          <li class="tocline">
            <a href="#the-setpropertywritehandler-method" class=
            "tocxref"><span class="secno">5.17</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="setPropertyWriteHandler()"
            data-lt=
            "setpropertywritehandler()|setPropertyWriteHandler"><code>
            setPropertyWriteHandler()</code></span> method</a>
          </li>
          <li class="tocline">
            <a href="#the-setactionhandler-method" class=
            "tocxref"><span class="secno">5.18</span> The
            <span data-dfn-for="exposedthing" data-dfn-type="dfn"
            data-idl="" data-title="setActionHandler()" data-lt=
            "setactionhandler()|setActionHandler"><code>setActionHandler()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#examples-1" class="tocxref"><span class=
            "secno">5.19</span> Examples</a>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href=
        "#experimental-extensions-to-the-consumedthing-interface"
        class="tocxref"><span class="secno">6.</span> Experimental
        extensions to the <strong>ConsumedThing</strong>
        interface</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#the-getproperties-method" class=
            "tocxref"><span class="secno">6.1</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="getProperties()" data-lt=
            "getproperties()|getProperties"><code>getProperties()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-getactions-method" class=
            "tocxref"><span class="secno">6.2</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="getActions()" data-lt=
            "getactions()|getActions"><code>getActions()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-getevents-method" class=
            "tocxref"><span class="secno">6.3</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="getEvents()" data-lt=
            "getevents()|getEvents"><code>getEvents()</code></span>
            method</a>
          </li>
          <li class="tocline">
            <a href="#the-getlinks-method" class=
            "tocxref"><span class="secno">6.4</span> The
            <span data-dfn-for="consumedthing" data-dfn-type="dfn"
            data-idl="" data-title="getLinks()" data-lt=
            "getlinks()|getLinks"><code>getLinks()</code></span>
            method</a>
            <ol class="toc">
              <li class="tocline">
                <a href="#the-tdlink-dictionary" class=
                "tocxref"><span class="secno">6.4.1</span> The
                <span data-dfn-for="" data-dfn-type="dfn" data-idl=
                "" data-title="TDLink"><code>TDLink</code></span>
                dictionary</a>
              </li>
            </ol>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href="#observables" class="tocxref"><span class=
        "secno">7.</span> Observables</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#the-observer-interface" class=
            "tocxref"><span class="secno">7.1</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title="Observer"><code>Observer</code></span>
            interface</a>
          </li>
          <li class="tocline">
            <a href="#the-subscription-interface" class=
            "tocxref"><span class="secno">7.2</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title=
            "Subscription"><code>Subscription</code></span>
            interface</a>
          </li>
          <li class="tocline">
            <a href="#the-observable-interface" class=
            "tocxref"><span class="secno">7.3</span> The
            <span data-dfn-for="" data-dfn-type="dfn" data-idl=""
            data-title="Observable"><code>Observable</code></span>
            interface</a>
          </li>
        </ol>
      </li>
      <li class="tocline">
        <a href="#security" class="tocxref"><span class=
        "secno">8.</span> Security and Privacy</a>
      </li>
      <li class="tocline">
        <a href="#terminology-and-conventions" class=
        "tocxref"><span class="secno">9.</span> Terminology and
        conventions</a>
      </li>
      <li class="tocline">
        <a href="#conformance" class="tocxref"><span class=
        "secno">10.</span> Conformance</a>
      </li>
      <li class="tocline">
        <a href="#Changes" class="tocxref"><span class=
        "secno">A.</span> Changes</a>
      </li>
      <li class="tocline">
        <a href="#openissues" class="tocxref"><span class=
        "secno">B.</span> Open issues</a>
      </li>
      <li class="tocline">
        <a href="#acknowledgements" class="tocxref"><span class=
        "secno">C.</span> Acknowledgements</a>
      </li>
      <li class="tocline">
        <a href="#references" class="tocxref"><span class=
        "secno">D.</span> References</a>
        <ol class="toc">
          <li class="tocline">
            <a href="#normative-references" class=
            "tocxref"><span class="secno">D.1</span> Normative
            references</a>
          </li>
          <li class="tocline">
            <a href="#informative-references" class=
            "tocxref"><span class="secno">D.2</span> Informative
            references</a>
          </li>
        </ol>
      </li>
    </ol>
  </nav>
  <section id="introduction">
    <!--OddPage-->
    <h2 id="x1-introduction"><span class="secno">1.</span>
    Introduction</h2>
    <p>The overall WoT concepts are described in the <a href=
    "https://w3c.github.io/wot-architecture/">WoT Architecture</a>
    document. The Web of Things is made of entities (<a href=
    "#dfn-things" class="internalDFN" data-link-type=
    "dfn">Thing</a>s) that can describe their capabilities in a
    machine-interpretable format, the <a href=
    "#dfn-thing-descriptions" class="internalDFN" data-link-type=
    "dfn">Thing Description</a> (TD) and expose these capabilities
    through the <a href="#dfn-wot-interface" class="internalDFN"
    data-link-type="dfn">WoT Interface</a>. Support for scripting
    is optional for WoT devices.</p>
    <p>By <a href="#dfn-consume" class="internalDFN"
    data-link-type="dfn">consuming a TD</a>, a client <a href=
    "#dfn-things" class="internalDFN" data-link-type=
    "dfn">Thing</a> creates a runtime resource model that allows
    accessing the <a href="#dfn-properties" class="internalDFN"
    data-link-type="dfn">Properties</a>, <a href="#dfn-actions"
    class="internalDFN" data-link-type="dfn">Actions</a> and
    <a href="#dfn-events" class="internalDFN" data-link-type=
    "dfn">Events</a> exposed by the server <a href="#dfn-things"
    class="internalDFN" data-link-type="dfn">Thing</a>.</p>
    <p>Exposing a <a href="#dfn-things" class="internalDFN"
    data-link-type="dfn">Thing</a> requires defining a <a href=
    "#dfn-thing-descriptions" class="internalDFN" data-link-type=
    "dfn">Thing Description</a> (TD) and instantiating a software
    stack needed to serve requests for accessing the exposed
    <a href="#dfn-properties" class="internalDFN" data-link-type=
    "dfn">Properties</a>, <a href="#dfn-actions" class=
    "internalDFN" data-link-type="dfn">Actions</a> and <a href=
    "#dfn-events" class="internalDFN" data-link-type=
    "dfn">Events</a>. This specification describes how to expose
    and consume <a href="#dfn-things" class="internalDFN"
    data-link-type="dfn">Thing</a>s by a script.</p>
    <div class="note">
      <div role="heading" class="note-title marker" id="h-note"
      aria-level="3">
        <span>Note</span>
      </div>
      <p class="">Typically scripts are meant to be used on devices
      able to provide resources (with a <a href=
      "#dfn-wot-interface" class="internalDFN" data-link-type=
      "dfn">WoT interface</a>) for managing (installing, updating,
      running) scripts, such as bridges or gateways that expose and
      control simpler devices as WoT <a href="#dfn-things" class=
      "internalDFN" data-link-type="dfn">Thing</a>s.</p>
    </div>
    <div class="note">
      <div role="heading" class="note-title marker" id="h-note-0"
      aria-level="3">
        <span>Note</span>
      </div>
      <p class="">This specification does not make assumptions on
      how the <a href="#dfn-wot-runtime" class="internalDFN"
      data-link-type="dfn">WoT Runtime</a> handles and runs
      scripts, including single or multiple tenancy, script
      deployment and lifecycle management. The API already supports
      the generic mechanisms that make it possible to implement
      script management, for instance by exposing a manager
      <a href="#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> whose <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Actions</a> (action
      handlers) implement script lifecycle management
      operations.</p>
    </div>
    <p>For an introduction on how scripts could be used in <a href=
    "#dfn-web-of-things" class="internalDFN" data-link-type=
    "dfn">Web of Things</a>, check the <a href=
    "https://w3c.github.io/wot-scripting-api/primer">Primer</a>
    document. For some background on API design decisions check the
    <a href=
    "https://w3c.github.io/wot-scripting-api/rationale">Rationale</a>
    document.</p>
  </section>
  <section class="informative" id="use-cases">
    <!--OddPage-->
    <h2 id="x2-use-cases"><span class="secno">2.</span> Use
    Cases</h2>
    <p><em>This section is non-normative.</em></p>
    <p>The following scripting use cases are supported in this
    specification:</p>
    <section id="discovery">
      <h3 id="x2-1-discovery"><span class="secno">2.1</span>
      Discovery</h3>
      <ul>
        <li>Discover all <a href="#dfn-things" class="internalDFN"
          data-link-type="dfn">Thing</a>s in the WoT network by
          sending a broadcast request.
        </li>
        <li>Discover <a href="#dfn-things" class="internalDFN"
        data-link-type="dfn">Thing</a>s running in the local
        <a href="#dfn-wot-runtime" class="internalDFN"
        data-link-type="dfn">WoT Runtime</a>.
        </li>
        <li>Discover nearby <a href="#dfn-things" class=
        "internalDFN" data-link-type="dfn">Thing</a>s, for instance
        by NFC or Bluetooth.
        </li>
        <li>Discover <a href="#dfn-things" class="internalDFN"
        data-link-type="dfn">Thing</a>s by sending a discovery
        request to a given registry.
        </li>
        <li>Discover <a href="#dfn-things" class="internalDFN"
        data-link-type="dfn">Thing</a>s by filters defined on
        <a href="#dfn-thing-descriptions" class="internalDFN"
        data-link-type="dfn">Thing Description</a>s
        </li>
        <li>Discover <a href="#dfn-things" class="internalDFN"
        data-link-type="dfn">Thing</a>s by semantic filters.
        </li>
        <li>Stop or suppress an ongoing discovery process.</li>
        <li>Optionally specify a timeout to the discovery process
        after which it is stopped/suppressed.</li>
      </ul>
    </section>
    <section id="consuming-a-thing">
      <h3 id="x2-2-consuming-a-thing"><span class=
      "secno">2.2</span> Consuming a Thing</h3>
      <ul>
        <li>Fetch a <a href="#dfn-thing-descriptions" class=
        "internalDFN" data-link-type="dfn">Thing Description</a> of
        a <a href="#dfn-things" class="internalDFN"
          data-link-type="dfn">Thing</a> given its URL.
        </li>
        <li>
          <a href="#dfn-consume" class="internalDFN"
          data-link-type="dfn">Consume a TD</a> of a <a href=
          "#dfn-things" class="internalDFN" data-link-type=
          "dfn">Thing</a>, including parsing the <a href="#dfn-td"
          class="internalDFN" data-link-type="dfn">TD</a> and
          generating the protocol bindings in order to access lower
          level functionality.
        </li>
        <li>On a consumed <a href="#dfn-things" class="internalDFN"
          data-link-type="dfn">Thing</a>,
          <ul>
            <li>Read the value of a <a href="#dfn-properties"
              class="internalDFN" data-link-type="dfn">Property</a>
              or set of properties.
            </li>
            <li>Set the value of a <a href="#dfn-properties"
              class="internalDFN" data-link-type="dfn">Property</a>
              or a set of properties.
            </li>
            <li>Observe value changes of a <a href=
            "#dfn-properties" class="internalDFN" data-link-type=
            "dfn">Property</a>.
            </li>
            <li>Invoke an <a href="#dfn-actions" class=
            "internalDFN" data-link-type="dfn">Action</a>.
            </li>
            <li>Observe <a href="#dfn-events" class="internalDFN"
            data-link-type="dfn">Events</a> emitted by the
              <a href="#dfn-things" class="internalDFN"
              data-link-type="dfn">Thing</a>.
            </li>
            <li>Observe changes to the <a href=
            "#dfn-thing-descriptions" class="internalDFN"
            data-link-type="dfn">Thing Description</a> of the
            <a href="#dfn-things" class="internalDFN"
            data-link-type="dfn">Thing</a>.
            </li>
            <li>Get the <a href="#dfn-thing-descriptions" class=
            "internalDFN" data-link-type="dfn">Thing
            Description</a>.
            </li>
            <li>Get the list of linked resources based on the
            <a href="#dfn-thing-descriptions" class="internalDFN"
            data-link-type="dfn">Thing Description</a>.
            </li>
          </ul>
        </li>
      </ul>
    </section>
    <section id="exposing-a-thing">
      <h3 id="x2-3-exposing-a-thing"><span class="secno">2.3</span>
      Exposing a Thing</h3>
      <ul>
        <li>Exposing the <a href="#dfn-things" class="internalDFN"
          data-link-type="dfn">Thing</a> includes generating the
          protocol bindings in order to access lower level
          functionality.
        </li>
        <li>Create a local <a href="#dom-exposedthing" class=
        "internalDFN" data-link-type=
        "dfn"><code>ExposedThing</code></a> to be exposed, based on
        a <a href="#dfn-thing-descriptions" class="internalDFN"
        data-link-type="dfn">Thing Description</a> provided in
        string serialized format, or out of a template or an
        existing <a href="#dom-consumedthing" class="internalDFN"
        data-link-type="dfn"><code>ConsumedThing</code></a> object.
        </li>
        <li>Add a <a href="#dfn-properties" class="internalDFN"
        data-link-type="dfn">Property</a> definition to the
          <a href="#dfn-things" class="internalDFN" data-link-type=
          "dfn">Thing</a>.
        </li>
        <li>Add an <a href="#dfn-actions" class="internalDFN"
        data-link-type="dfn">Action</a> definition to the
          <a href="#dfn-things" class="internalDFN" data-link-type=
          "dfn">Thing</a>.
        </li>
        <li>Add an <a href="#dfn-events" class="internalDFN"
        data-link-type="dfn">Event</a> definition to the <a href=
        "#dfn-things" class="internalDFN" data-link-type=
        "dfn">Thing</a>.
        </li>
        <li>Attach semantic information to the <a href=
        "#dfn-things" class="internalDFN" data-link-type=
        "dfn">Thing</a>.
        </li>
        <li>Attach semantic information to a <a href=
        "#dfn-properties" class="internalDFN" data-link-type="dfn">
          Property</a>.
        </li>
        <li>Attach semantic information to an <a href=
        "#dfn-actions" class="internalDFN" data-link-type=
        "dfn">Action</a>.
        </li>
        <li>Attach semantic information to an <a href="#dfn-events"
          class="internalDFN" data-link-type="dfn">Event</a>.
        </li>
        <li>Emit an <a href="#dfn-events" class="internalDFN"
        data-link-type="dfn">Event</a>, i.e. notify all listeners
        subscribed to that <a href="#dfn-events" class=
        "internalDFN" data-link-type="dfn">Event</a>.
        </li>
        <li>Provide notifications for <a href="#dfn-td" class=
        "internalDFN" data-link-type="dfn">TD</a> changes to
        clients subscribed to that.
        </li>
        <li>Mark/unmark the Thing to be discoverable.</li>
        <li>Mark/unmark the Thing to be consumable.</li>
        <li>Start the exposed <a href="#dfn-things" class=
        "internalDFN" data-link-type="dfn">Thing</a> in order to
        process external requests.
        </li>
        <li>Stop the exposed <a href="#dfn-things" class=
        "internalDFN" data-link-type="dfn">Thing</a>.
        </li>
        <li>Register handlers for external requests:
          <ul>
            <li>to retrieve a <a href="#dfn-properties" class=
            "internalDFN" data-link-type="dfn">Property</a> value;
            </li>
            <li>to update a <a href="#dfn-properties" class=
            "internalDFN" data-link-type="dfn">Property</a> value;
            </li>
            <li>to run an <a href="#dfn-actions" class=
            "internalDFN" data-link-type="dfn">Action</a>: take the
            parameters from the request, execute the defined
            action, and return the result;
            </li>
          </ul>
        </li>
      </ul>
    </section>
  </section>
  <section data-dfn-for="WoT" id="the-wot-object">
    <!--OddPage-->
    <h2 id="x3-the-wot-object"><span class="secno">3.</span> The
    <dfn data-dfn-for="" data-dfn-type="dfn" id="dom-wot" data-idl=
    "" data-title="WoT"><code>WoT</code></dfn> object</h2>
    <p>The WoT object is the API entry point and it is exposed by
    an implementation of the <a href="#dfn-wot-runtime" class=
    "internalDFN" data-link-type="dfn">WoT Runtime</a>. The
    <dfn data-dfn-type="dfn" id="dfn-wot-object">WoT object</dfn>
    does not expose properties, only methods for discovering,
    consuming and exposing a <a href="#dfn-things" class=
    "internalDFN" data-link-type="dfn">Thing</a>.</p>
    <div class="note">
      <div role="heading" class="note-title marker" id="h-note-1"
      aria-level="3">
        <span>Note</span>
      </div>
      <p class="">Browser implementations <em class="rfc2119"
      title="SHOULD">SHOULD</em> use a namespace object such as
      <code>wot</code>, and <a href=
      "https://nodejs.org/en/">Node.js</a>-like runtimes <em class=
      "rfc2119" title="MAY">MAY</em> provide the API object through
      the <a href=
      "https://nodejs.org/api/modules.html"><code>require()</code></a>
      or <a href=
      "http://www.ecma-international.org/ecma-262/6.0/#sec-imports">
      <code>import</code></a> mechanism.</p>
    </div>
    <div>
      <pre class="def idl"><span class="idlInterface" id=
      "idl-def-wot" data-idl="" data-title=
      "WoT">interface <span class=
      "idlInterfaceID"><a data-no-default="" data-link-for=""
      data-lt="" href="#dom-wot" class="internalDFN" data-link-type=
      "dfn"><code>WoT</code></a></span> {
<span class="idlMethod" id="idl-def-wot-discover-filter" data-idl=
"" data-title="discover" data-dfn-for="wot">    <span class=
"idlMethType"><a href="#dom-observable" class="internalDFN"
data-link-type="dfn"><code>Observable</code></a>&lt;<a href=
"#dom-consumedthing" class="internalDFN" data-link-type=
"dfn"><code>ConsumedThing</code></a>&gt;</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="wot" data-lt=
"discover()|discover" href="#dom-wot-discover" class="internalDFN"
data-link-type="dfn">discover</a></span>(<span class=
"idlParam">optional <span class="idlParamType"><a href=
"#dom-thingfilter" class="internalDFN" data-link-type=
"dfn"><code>ThingFilter</code></a></span> <span class=
"idlParamName">filter</span></span>);</span>
<span class="idlMethod" id="idl-def-wot-fetch-url" data-idl=""
data-title="fetch" data-dfn-for="wot">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="#dom-thingdescription"
class="internalDFN" data-link-type=
"dfn"><code>ThingDescription</code></a>&gt;</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="wot" data-lt=
"fetch()|fetch" href="#dom-wot-fetch" class="internalDFN"
data-link-type="dfn">fetch</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">url</span></span>);</span>
<span class="idlMethod" id="idl-def-wot-consume-td" data-idl=""
data-title="consume" data-dfn-for="wot">    <span class=
"idlMethType"><a href="#dom-consumedthing" class="internalDFN"
data-link-type=
"dfn"><code>ConsumedThing</code></a></span>             <span class="idlMethName"><a data-no-default=""
data-link-for="wot" data-lt="consume()|consume" href=
"#dom-wot-consume" class="internalDFN" data-link-type=
"dfn">consume</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href="#dom-thingdescription" class="internalDFN"
data-link-type=
"dfn"><code>ThingDescription</code></a></span> <span class=
"idlParamName">td</span></span>);</span>
<span class="idlMethod" id="idl-def-wot-produce-model" data-idl=""
data-title="produce" data-dfn-for="wot">    <span class=
"idlMethType"><a href="#dom-exposedthing" class="internalDFN"
data-link-type=
"dfn"><code>ExposedThing</code></a></span>              <span class="idlMethName"><a data-no-default=""
data-link-for="wot" data-lt="produce()|produce" href=
"#dom-wot-produce" class="internalDFN" data-link-type=
"dfn">produce</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href="#dom-thingmodel" class="internalDFN"
data-link-type=
"dfn"><code>ThingModel</code></a></span> <span class="idlParamName">model</span></span>);</span>
};</span>

<span class="idlTypedef" id="idl-def-thingdescription" data-idl=""
data-title="ThingDescription">typedef <span class=
"idlTypedefType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlTypedefID"><a data-no-default=""
data-link-for="" data-lt="" href="#dom-thingdescription" class=
"internalDFN" data-link-type=
"dfn"><code>ThingDescription</code></a></span>;</span>

<span class="idlTypedef" id="idl-def-thingmodel" data-idl=""
data-title="ThingModel">typedef <span class=
"idlTypedefType">(<a href="#dom-thingtemplate" class="internalDFN"
data-link-type="dfn"><code>ThingTemplate</code></a> or <a href=
"#dom-thingdescription" class="internalDFN" data-link-type=
"dfn"><code>ThingDescription</code></a>)</span> <span class=
"idlTypedefID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-thingmodel" class="internalDFN" data-link-type=
"dfn"><code>ThingModel</code></a></span>;</span></pre>
    </div>
    <div class="ednote">
      <div role="heading" class="ednote-title marker" id=
      "h-ednote-0" aria-level="3">
        <span>Editor's note</span>
      </div>
      <p class="">The algorithms for the WoT methods will be
      specified later, including error handling and security
      considerations.</p>
    </div>
    <section id="the-discover-method">
      <h3 id="x3-1-the-discover-method"><span class=
      "secno">3.1</span> The <dfn data-dfn-for="wot" data-dfn-type=
      "dfn" id="dom-wot-discover" data-idl="" data-title=
      "discover()" data-lt=
      "discover()|discover"><code>discover()</code></dfn>
      method</h3>
      <p>Starts the discovery process that will provide
      <code><a href="#dom-consumedthing" class="internalDFN"
      data-link-type="dfn"><code>ConsumedThing</code></a></code>
      objects that match the optional argument <code><a href=
      "#dom-thingfilter" class="internalDFN" data-link-type=
      "dfn"><code>ThingFilter</code></a></code>. When the argument
      is not provided, starts the widest discovery the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a> and <a href=
      "#dfn-protocol-bindings" class="internalDFN" data-link-type=
      "dfn">Protocol Bindings</a> allow and support. Returns an
      <a href=
      "https://github.com/tc39/proposal-observable"><code>Observable</code></a>
      object that can be subscribed to and unsubscribed from.</p>
      <section data-dfn-for="DiscoveryMethod" id=
      "the-discoverymethod-enumeration">
        <h4 id="x3-1-1-the-discoverymethod-enumeration">
        <span class="secno">3.1.1</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-discoverymethod" data-idl=""
        data-title=
        "DiscoveryMethod"><code>DiscoveryMethod</code></dfn>
        enumeration</h4>
        <div>
          <pre class="def idl"><span class="idlTypedef" id=
          "idl-def-discoverymethod" data-idl="" data-title=
          "DiscoveryMethod">typedef <span class=
          "idlTypedefType"><a href=
          "https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlTypedefID"><a data-no-default=""
data-link-for="" data-lt="" href="#dom-discoverymethod" class=
"internalDFN" data-link-type=
"dfn"><code>DiscoveryMethod</code></a></span>;</span></pre>
        </div>
        <p><a href="#dom-discoverymethod" class="internalDFN"
        data-link-type="dfn"><code>DiscoveryMethod</code></a>
        represents the discovery type to be used:</p>
        <ul>
          <li><dfn data-dfn-type="dfn" id="dfn-any">"any"</dfn>
          does not provide any restriction</li>
          <li>
            <dfn data-dfn-type="dfn" id="dfn-local">"local"</dfn>
            for discovering <a href="#dfn-things" class=
            "internalDFN" data-link-type="dfn">Thing</a>s defined
            in the same device
          </li>
          <li>
            <dfn data-dfn-type="dfn" id="dfn-nearby">"nearby"</dfn>
            for discovering <a href="#dfn-things" class=
            "internalDFN" data-link-type="dfn">Thing</a>s nearby
            the device, e.g. by Bluetooth or NFC
          </li>
          <li>
            <dfn data-dfn-type="dfn" id=
            "dfn-directory">"directory"</dfn> for discovery based
            on a service provided by a directory or repository of
            <a href="#dfn-things" class="internalDFN"
            data-link-type="dfn">Thing</a>s
          </li>
          <li><dfn data-dfn-type="dfn" id=
          "dfn-broadcast">"broadcast"</dfn> for an open ended
          discovery based on sending a request to a broadcast
          address</li>
          <li><dfn data-dfn-type="dfn" id="dfn-other">"other"</dfn>
          for a proprietary method defined by the solution.</li>
        </ul>
      </section>
      <section data-dfn-for="ThingFilter" id=
      "the-thingfilter-dictionary">
        <h4 id="x3-1-2-the-thingfilter-dictionary"><span class=
        "secno">3.1.2</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-thingfilter" data-idl=""
        data-title="ThingFilter"><code>ThingFilter</code></dfn>
        dictionary</h4>
        <p>The <a href="#dom-thingfilter" class="internalDFN"
        data-link-type="dfn"><code>ThingFilter</code></a>
        dictionary that represents the constraints for discovering
        <a href="#dfn-things" class="internalDFN" data-link-type=
        "dfn">Thing</a>s as key-value pairs.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id=
          "idl-def-thingfilter" data-idl="" data-title=
          "ThingFilter">dictionary <span class=
          "idlDictionaryID"><a data-no-default="" data-link-for=""
          data-lt="" href="#dom-thingfilter" class="internalDFN"
          data-link-type=
          "dfn"><code>ThingFilter</code></a></span> {
<span class="idlMember" id="idl-def-thingfilter-method" data-idl=""
data-title="method" data-dfn-for="thingfilter">    <span class=
"idlMemberType"><a href="#dom-discoverymethod" class="internalDFN"
data-link-type=
"dfn"><code>DiscoveryMethod</code></a></span>      <span class=
"idlMemberName"><a data-no-default="" data-link-for="thingfilter"
data-lt="" href="#dom-thingfilter-method" class="internalDFN"
data-link-type="dfn"><code>method</code></a></span> = <span class=
"idlMemberValue">"any"</span>;</span>
<span class="idlMember" id="idl-def-thingfilter-url" data-idl=""
data-title="url" data-dfn-for="thingfilter">    <span class=
"idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>            <span class="idlMemberName"><a data-no-default=""
data-link-for="thingfilter" data-lt="" href="#dom-thingfilter-url"
class="internalDFN" data-link-type=
"dfn"><code>url</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingfilter-query" data-idl=""
data-title="query" data-dfn-for="thingfilter">    <span class=
"idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span>            <span class="idlMemberName"><a data-no-default=""
data-link-for="thingfilter" data-lt="" href=
"#dom-thingfilter-query" class="internalDFN" data-link-type=
"dfn"><code>query</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingfilter-constraints"
data-idl="" data-title="constraints" data-dfn-for=
"thingfilter">    <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;Dictionary&gt;</span> <span class="idlMemberName"><a data-no-default=""
data-link-for="thingfilter" data-lt="" href=
"#dom-thingfilter-constraints" class="internalDFN" data-link-type=
"dfn"><code>constraints</code></a></span>;</span>
};</span></pre>
        </div>
        <p>The <dfn data-dfn-for="thingfilter" data-dfn-type="dfn"
        id="dom-thingfilter-method" data-idl="" data-title=
        "method"><code>method</code></dfn> property represents the
        discovery type that should be used in the discovery
        process. The possible values are defined by the
        <code><a href="#dom-discoverymethod" class="internalDFN"
        data-link-type=
        "dfn"><code>DiscoveryMethod</code></a></code> enumeration
        that can be extended by string values defined by solutions
        (with no guarantee of interoperability).</p>
        <div class="ednote">
          <div role="heading" class="ednote-title marker" id=
          "h-ednote-1" aria-level="5">
            <span>Editor's note</span>
          </div>
          <p class="">The <a href="#dom-discoverymethod" class=
          "internalDFN" data-link-type=
          "dfn"><code>DiscoveryMethod</code></a> enumeration can be
          extended by the <a href="#dfn-thing-descriptions" class=
          "internalDFN" data-link-type="dfn">Thing Description</a>
          with values that are not specified here. This
          extensibility of <a href="#dom-discoverymethod" class=
          "internalDFN" data-link-type=
          "dfn"><code>DiscoveryMethod</code></a> by proprietary or
          private methods is a working assumption until consensus
          is formed and may be removed later.</p>
        </div>
        <p>The <dfn data-dfn-for="thingfilter" data-dfn-type="dfn"
        id="dom-thingfilter-url" data-idl="" data-title=
        "url"><code>url</code></dfn> property represents additional
        information for the discovery method, such as the URL of
        the target entity serving the discovery request, such as a
        <a href="#dfn-thing-directory" class="internalDFN"
        data-link-type="dfn">Thing Directory</a> or a Thing.</p>
        <p>The <dfn data-dfn-for="thingfilter" data-dfn-type="dfn"
        id="dom-thingfilter-query" data-idl="" data-title=
        "query"><code>query</code></dfn> property represents a
        query string accepted by the implementation, for instance a
        SPARQL query.</p>
        <p>The <dfn data-dfn-for="thingfilter" data-dfn-type="dfn"
        id="dom-thingfilter-constraints" data-idl="" data-title=
        "constraints"><code>constraints</code></dfn> property
        represents additional information for the discovery method
        in the form of a list of sets of property-value pairs
        (dictionaries). The list elements (dictionaries) are in OR
        relationship, and within a constraint dictionary the
        key-value pairs are in AND relationship. Implementations
        <em class="rfc2119" title="SHOULD">SHOULD</em> make the
        following mapping from the constraint dictionaries to
        <a href="#dom-semanticannotations" class="internalDFN"
        data-link-type="dfn"><code>SemanticAnnotations</code></a>:
        for each property-value pair in a constraint
        dictionary,</p>
        <ul>
          <li>Each property name in the constraint dictionary
          <em class="rfc2119" title="SHOULD">SHOULD</em> match the
          either the <code>name</code> property of a defined
          <a href="#dom-semantictype" class="internalDFN"
          data-link-type="dfn"><code>SemanticType</code></a> on the
          target <a href="#dfn-things" class="internalDFN"
          data-link-type="dfn">Thing</a> object, or the name of a
          <a href="#dfn-properties" class="internalDFN"
          data-link-type="dfn">Property</a> on the target
            <a href="#dfn-things" class="internalDFN"
            data-link-type="dfn">Thing</a>.
          </li>
          <li>When the name matches, the values are compared. If
          the values match, the constraint is matched.</li>
        </ul>
        <div class="ednote">
          <div role="heading" class="ednote-title marker" id=
          "h-ednote-2" aria-level="5">
            <span>Editor's note</span>
          </div>
          <p class="">Constraints are experimental feature,
          implementations are not required to support them.</p>
        </div>
        <div class="ednote">
          <div role="heading" class="ednote-title marker" id=
          "h-ednote-3" aria-level="5">
            <span>Editor's note</span>
          </div>
          <p class="">Semantic annotations need revisiting in order
          to simplify their representation. In the [<cite><a class=
          "bibref" href="#bib-WOT-TD">WOT-TD</a></cite>]
          specification they represent the <code>@type</code>
          construct. At the moment only <code>@context</code>,
          <code>@type</code> and <code>@id</code> constructs are
          used in the <a href="#dfn-td" class="internalDFN"
          data-link-type="dfn">TD</a>.</p>
        </div>
      </section>
    </section>
    <section id="the-fetch-method">
      <h3 id="x3-2-the-fetch-method"><span class="secno">3.2</span>
      The <dfn data-dfn-for="wot" data-dfn-type="dfn" id=
      "dom-wot-fetch" data-idl="" data-title="fetch()" data-lt=
      "fetch()|fetch"><code>fetch()</code></dfn> method</h3>
      <p>Accepts an <code>url</code> argument and returns a
      <code><a href="#dfn-promise" class="internalDFN"
      data-link-type="dfn">Promise</a></code> that resolves with a
      <a href="#dom-thingdescription" class="internalDFN"
      data-link-type="dfn"><code>ThingDescription</code></a>.</p>
    </section>
    <section data-dfn-for="ThingDescription" id=
    "the-thingdescription-type">
      <h3 id="x3-3-the-thingdescription-type"><span class=
      "secno">3.3</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-thingdescription" data-idl="" data-title=
      "ThingDescription"><code>ThingDescription</code></dfn>
      type</h3>
      <p>Representation of the <a href="#dfn-thing-descriptions"
      class="internalDFN" data-link-type="dfn">Thing
	  Description</a>, standardized in the
        <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/">
	  Wot Things Description</a> specification.</p>
      <div class="note">
        <div role="heading" class="note-title marker" id="h-note-2"
        aria-level="4">
          <span>Note</span>
        </div>
        <p class="">In this version of the API, <a href=
        "#dfn-thing-descriptions" class="internalDFN"
        data-link-type="dfn">Thing Description</a>s are represented
        as opaque strings, denoting a serialized form, for instance
        JSON or JSON-LD. See <a href=
        "https://github.com/w3c/wot-scripting-api/issues/38">Issue
        38</a> and <a href=
        "https://github.com/w3c/wot-scripting-api/issues/45">Issue
        45</a>.</p>
      </div>
    </section>
    <section id="the-consume-method">
      <h3 id="x3-4-the-consume-method"><span class=
      "secno">3.4</span> The <dfn data-dfn-for="wot" data-dfn-type=
      "dfn" id="dom-wot-consume" data-idl="" data-title="consume()"
      data-lt="consume()|consume"><code>consume()</code></dfn>
      method</h3>
      <p>Accepts an <code>td</code> argument of type <code><a href=
      "#dom-thingdescription" class="internalDFN" data-link-type=
      "dfn"><code>ThingDescription</code></a></code> and returns a
      <a href="#dom-consumedthing" class="internalDFN"
      data-link-type="dfn"><code>ConsumedThing</code></a> object
      instantiated based on that description.</p>
    </section>
    <section id="the-produce-method">
      <h3 id="x3-5-the-produce-method"><span class=
      "secno">3.5</span> The <dfn id="dom-wot-produce"
      data-dfn-for="wot" data-dfn-type="dfn" data-idl=""
      data-title="produce()" data-lt=
      "produce()|produce"><code>produce()</code></dfn> method</h3>
      <p>Accepts a <code>model</code> argument of type
      <code><a href="#dom-thingmodel" class="internalDFN"
      data-link-type="dfn"><code>ThingModel</code></a></code> and
      returns an <a href="#dom-exposedthing" class="internalDFN"
      data-link-type="dfn"><code>ExposedThing</code></a> object,
      locally created based on the provided initialization
      parameters. An <a href="#dom-exposedthing" class=
      "internalDFN" data-link-type=
      "dfn"><code>ExposedThing</code></a> can be created in the
      following ways:</p>
      <ol>
        <li>from an initial model (including a user given name and
        <a href="#the-semanticannotations-dictionary">semantic
        annotations</a>), then adding properties, actions, events
        and request handlers;
        </li>
        <li>from a <a href="#dfn-thing-descriptions" class=
        "internalDFN" data-link-type="dfn">Thing Description</a>
        (possibly of a <a href="#dom-consumedthing" class=
        "internalDFN" data-link-type=
        "dfn"><code>ConsumedThing</code></a> object), then adding
        request handlers.
        </li>
      </ol>
    </section>
    <section data-dfn-for="ThingModel" id="the-thingmodel-type">
      <h3 id="x3-6-the-thingmodel-type"><span class=
      "secno">3.6</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-thingmodel" data-idl="" data-title=
      "ThingModel"><code>ThingModel</code></dfn> type</h3>
      <p>A Thing model is used for producing a new <a href=
      "#dom-exposedthing" class="internalDFN" data-link-type=
      "dfn"><code>ExposedThing</code></a> and can be either a
      <a href="#dom-thingtemplate" class="internalDFN"
      data-link-type="dfn"><code>ThingTemplate</code></a>, or a
      <a href="#dom-thingdescription" class="internalDFN"
      data-link-type="dfn"><code>ThingDescription</code></a>.</p>
    </section>
    <section data-dfn-for="SemanticAnnotations" id=
    "the-semanticannotations-dictionary">
      <h3 id="x3-7-the-semanticannotations-dictionary"><span class=
      "secno">3.7</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-semanticannotations" data-idl="" data-title=
      "SemanticAnnotations"><code>SemanticAnnotations</code></dfn>
      dictionary</h3>
      <p>A dictionary that provides the semantic types and semantic
      metadata.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id=
        "idl-def-semanticannotations" data-idl="" data-title=
        "SemanticAnnotations">dictionary <span class=
        "idlDictionaryID"><a data-no-default="" data-link-for=""
        data-lt="" href="#dom-semanticannotations" class=
        "internalDFN" data-link-type=
        "dfn"><code>SemanticAnnotations</code></a></span> {
<span class="idlMember" id=
"idl-def-semanticannotations-semantictype" data-idl="" data-title=
"semanticType" data-dfn-for="semanticannotations">    <span class=
"idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-semantictype"
class="internalDFN" data-link-type=
"dfn"><code>SemanticType</code></a>&gt;</span>     <span class=
"idlMemberName"><a data-no-default="" data-link-for=
"semanticannotations" data-lt="" href=
"#dom-semanticannotations-semantictype" class="internalDFN"
data-link-type="dfn"><code>semanticType</code></a></span>;</span>
<span class="idlMember" id="idl-def-semanticannotations-metadata"
data-idl="" data-title="metadata" data-dfn-for=
"semanticannotations">    <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-semanticmetadata"
class="internalDFN" data-link-type=
"dfn"><code>SemanticMetadata</code></a>&gt;</span> <span class=
"idlMemberName"><a data-no-default="" data-link-for=
"semanticannotations" data-lt="" href=
"#dom-semanticannotations-metadata" class="internalDFN"
data-link-type="dfn"><code>metadata</code></a></span>;</span>
};</span></pre>
      </div>
      <p>The <dfn data-dfn-for="semanticannotations" data-dfn-type=
      "dfn" id="dom-semanticannotations-semantictype" data-idl=""
      data-title="semanticType"><code>semanticType</code></dfn>
      property denotes a list of <a href="#dom-semantictype" class=
      "internalDFN" data-link-type=
      "dfn"><code>SemanticType</code></a> objects that define the
      semantic types that can be used in semantic metadata
      type-value pairs.</p>
      <p>The <dfn data-dfn-for="semanticannotations" data-dfn-type=
      "dfn" id="dom-semanticannotations-metadata" data-idl=""
      data-title="metadata"><code>metadata</code></dfn> property
      denotes a list of <a href="#dom-semanticmetadata" class=
      "internalDFN" data-link-type=
      "dfn"><code>SemanticMetadata</code></a> objects (type-value
      pairs).</p>
    </section>
    <section data-dfn-for="SemanticType" id=
    "the-semantictype-dictionary">
      <h3 id="x3-8-the-semantictype-dictionary"><span class=
      "secno">3.8</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-semantictype" data-idl="" data-title=
      "SemanticType"><code>SemanticType</code></dfn>
      dictionary</h3>
      <div>
        <pre class="def idl"><span class="idlDictionary" id=
        "idl-def-semantictype" data-idl="" data-title=
        "SemanticType">dictionary <span class=
        "idlDictionaryID"><a data-no-default="" data-link-for=""
        data-lt="" href="#dom-semantictype" class="internalDFN"
        data-link-type="dfn"><code>SemanticType</code></a></span> {
<span class="idlMember" id="idl-def-semantictype-name" data-idl=""
data-title="name" data-dfn-for=
"semantictype">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="semantictype" data-lt="" href=
"#dom-semantictype-name" class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-semantictype-context" data-idl=
"" data-title="context" data-dfn-for=
"semantictype">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="semantictype" data-lt="" href=
"#dom-semantictype-context" class="internalDFN" data-link-type=
"dfn"><code>context</code></a></span>;</span>
<span class="idlMember" id="idl-def-semantictype-prefix" data-idl=
"" data-title="prefix" data-dfn-for=
"semantictype">             <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="semantictype" data-lt="" href=
"#dom-semantictype-prefix" class="internalDFN" data-link-type=
"dfn"><code>prefix</code></a></span>;</span>
};</span></pre>
      </div>
      <p>Represents a semantic type annotation, containing a name,
      a context and a prefix.</p>
      <ul>
        <li>The <dfn data-dfn-for="semantictype" data-dfn-type=
        "dfn" id="dom-semantictype-name" data-idl="" data-title=
        "name"><code>name</code></dfn> attribute represents the
        name of the semantic type in the given context.</li>
        <li>The <dfn data-dfn-for="semantictype" data-dfn-type=
        "dfn" id="dom-semantictype-context" data-idl="" data-title=
        "context"><code>context</code></dfn> attribute represents
        an URL link to the context of the semantic
        classification.</li>
        <li>The <dfn data-dfn-for="semantictype" data-dfn-type=
        "dfn" id="dom-semantictype-prefix" data-idl="" data-title=
        "prefix"><code>prefix</code></dfn> attribute represents a
        short prefix associated with a context.</li>
      </ul>
      <div class="ednote">
        <div role="heading" class="ednote-title marker" id=
        "h-ednote-4" aria-level="4">
          <span>Editor's note</span>
        </div>
        <p class="">Semantic type examples to be added.</p>
      </div>
    </section>
    <section data-dfn-for="SemanticMetadata" id=
    "the-semanticmetadata-dictionary">
      <h3 id="x3-9-the-semanticmetadata-dictionary"><span class=
      "secno">3.9</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-semanticmetadata" data-idl="" data-title=
      "SemanticMetadata"><code>SemanticMetadata</code></dfn>
      dictionary</h3>
      <div>
        <pre class="def idl"><span class="idlDictionary" id=
        "idl-def-semanticmetadata" data-idl="" data-title=
        "SemanticMetadata">dictionary <span class=
        "idlDictionaryID"><a data-no-default="" data-link-for=""
        data-lt="" href="#dom-semanticmetadata" class="internalDFN"
        data-link-type=
        "dfn"><code>SemanticMetadata</code></a></span> {
<span class="idlMember" id="idl-def-semanticmetadata-type"
data-idl="" data-title="type" data-dfn-for=
"semanticmetadata">    <span class="idlMemberType"><a href=
"#dom-semantictype" class="internalDFN" data-link-type=
"dfn"><code>SemanticType</code></a></span> <span class=
"idlMemberName"><a data-no-default="" data-link-for=
"semanticmetadata" data-lt="" href="#dom-semanticmetadata-type"
class="internalDFN" data-link-type=
"dfn"><code>type</code></a></span>;</span>
<span class="idlMember" id="idl-def-semanticmetadata-value"
data-idl="" data-title="value" data-dfn-for=
"semanticmetadata">    <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-any">any</a></span>          <span class="idlMemberName"><a data-no-default=""
data-link-for="semanticmetadata" data-lt="" href=
"#dom-semanticmetadata-value" class="internalDFN" data-link-type=
"dfn"><code>value</code></a></span>;</span>
};</span></pre>
      </div>
      <p>The <a href="#dom-semanticmetadata" class="internalDFN"
      data-link-type="dfn"><code>SemanticMetadata</code></a>
      dictionary describes a pair of semantic type and value:</p>
      <ul>
        <li>The <dfn data-dfn-for="semanticmetadata"
          data-dfn-type="dfn" id="dom-semanticmetadata-type"
          data-idl="" data-title="type"><code>type</code></dfn>
          attribute represents the semantic type name defined by a
          <a href="#dom-semantictype" class="internalDFN"
          data-link-type="dfn"><code>SemanticType</code></a>
          object.
        </li>
        <li>The <dfn data-dfn-for="semanticmetadata" data-dfn-type=
        "dfn" id="dom-semanticmetadata-value" data-idl=""
        data-title="value"><code>value</code></dfn> attribute
        represents the metadata value.</li>
      </ul>
    </section>
    <section data-dfn-for="ThingTemplate" id=
    "the-thingtemplate-dictionary">
      <h3 id="x3-10-the-thingtemplate-dictionary"><span class=
      "secno">3.10</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-thingtemplate" data-idl="" data-title=
      "ThingTemplate"><code>ThingTemplate</code></dfn>
      dictionary</h3>
      <p>A Thing Template is a dictionary that provides a user
      given name, and the semantic types and semantic metadata
      attached to the <a href="#dom-exposedthing" class=
      "internalDFN" data-link-type=
      "dfn"><code>ExposedThing</code></a> <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>'s root level.</p>
      <div>
        <pre class="def idl"><span class="idlDictionary" id=
        "idl-def-thingtemplate" data-idl="" data-title=
        "ThingTemplate">dictionary <span class=
        "idlDictionaryID"><a data-no-default="" data-link-for=""
        data-lt="" href="#dom-thingtemplate" class="internalDFN"
        data-link-type=
        "dfn"><code>ThingTemplate</code></a></span> : <span class=
        "idlSuperclass"><a href="#dom-semanticannotations" class=
        "internalDFN" data-link-type=
        "dfn"><code>SemanticAnnotations</code></a></span> {
<span class="idlMember" id="idl-def-thingtemplate-name" data-idl=""
data-title="name" data-dfn-for=
"thingtemplate">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="thingtemplate" data-lt="" href=
"#dom-thingtemplate-name" class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
};</span></pre>
      </div>
      <p>The <a href="#dom-thingtemplate" class="internalDFN"
      data-link-type="dfn"><code>ThingTemplate</code></a>
      dictionary extends <a href="#dom-semanticannotations" class=
      "internalDFN" data-link-type=
      "dfn"><code>SemanticAnnotations</code></a> and contains
      properties to initialize a <a href="#dfn-things" class=
      "internalDFN" data-link-type="dfn">Thing</a>:</p>
      <ul>
        <li>The <dfn data-dfn-for="thingtemplate" data-dfn-type=
        "dfn" id="dom-thingtemplate-name" data-idl="" data-title=
        "name"><code>name</code></dfn> attribute represents the
        user given name of the <a href="#dfn-things" class=
        "internalDFN" data-link-type="dfn">Thing</a>.
        </li>
      </ul>
      <div class="ednote">
        <div role="heading" class="ednote-title marker" id=
        "h-ednote-5" aria-level="4">
          <span>Editor's note</span>
        </div>
        <p class="">Support for configuration and security data
        might be added later.</p>
      </div>
    </section>
    <section id="examples">
      <h3 id="x3-11-examples"><span class="secno">3.11</span>
      Examples</h3>
      <div class="example">
        <div class="example-title marker">
          <span>Example 1</span><span style=
          "text-transform: none">: Discover Things via
          directory</span>
        </div>
        <pre class="hljs javascript" aria-busy="false"><span class=
        "hljs-keyword">let</span> discoveryFilter = {
  <span class="hljs-attr">method</span>: <span class=
"hljs-string">"directory"</span>,
  <span class="hljs-attr">url</span>: <span class=
"hljs-string">"http://directory.wotservice.org"</span>
};
<span class=
"hljs-keyword">let</span> subscription = wot.discover(discoveryFilter).subscribe(
  <span class="hljs-function"><span class=
"hljs-params">thing</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Found Thing "</span> + thing.name); },
  error =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished because an error: "</span> + error.message); },
  () =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished successfully"</span>);}
);
setTimeout( <span class="hljs-function"><span class=
"hljs-params">()</span> =&gt;</span> {
    subscription.unsubscribe();
    <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery timeout"</span>);
  },
  <span class="hljs-number">5000</span>);</pre>
      </div>
      <div class="note">
        <div role="heading" class="note-title marker" id="h-note-3"
        aria-level="4">
          <span>Note</span>
        </div>
        <p class="">Note that canceling a discovery (through
        <code>unsubscribe()</code>) may not be successful in all
        cases, for instance when discovery is based on open ended
        broadcast requests. However, once
        <code>unsubscribe()</code> has been called, implementations
        <em class="rfc2119" title="MUST">MUST</em> suppress further
        event handling ( i.e. further discoveries and errors) on
        the Observable. Also, a discovery error may not mean the
        end of the discovery process. However, in order to respect
        Observable semantics (error always terminates processing),
        implementations <em class="rfc2119" title="MUST">MUST</em>
        close or suppress further event handling on the
        Observable.</p>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 2</span><span style=
          "text-transform: none">: Discover Things exposed by local
          hardware</span>
        </div>
        <pre class="hljs javascript" aria-busy="false"><span class=
        "hljs-keyword">let</span> subscription = wot.discover({ <span class="hljs-attr">method</span>: <span class="hljs-string">"local"</span> }).subscribe(
  <span class="hljs-function"><span class=
"hljs-params">thing</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Found local Thing "</span> + thing.name); },
  error =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished successfully"</span>);}
);</pre>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 3</span><span style=
          "text-transform: none">: Same as above but with different
          Observable syntax</span>
        </div>
        <pre class="hljs javascript" aria-busy="false"><span class=
        "hljs-keyword">let</span> subscription = wot.discover({ <span class="hljs-attr">method</span>: <span class="hljs-string">"local"</span> }).subscribe({
  thing =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Found local Thing "</span> + thing.name); },
  <span class="hljs-attr">error</span>: <span class=
"hljs-function"><span class=
"hljs-params">err</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery error: "</span> + err.message); },
  <span class="hljs-attr">complete</span>: <span class=
"hljs-function"><span class=
"hljs-params">()</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished successfully"</span>);}
});</pre>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 4</span><span style=
          "text-transform: none">: Discover Things exposed nearby,
          via Bluetooth or NFC</span>
        </div>
        <pre class="hljs javascript" aria-busy="false"><span class=
        "hljs-keyword">let</span> subscription = wot.discover({
  <span class="hljs-attr">method</span>: <span class=
"hljs-string">"nearby"</span>,
  <span class="hljs-attr">constraints</span>: [{ <span class=
"hljs-attr">protocol</span>: <span class=
"hljs-string">"BLE-4.2"</span> }, { <span class=
"hljs-attr">protocol</span>: <span class=
"hljs-string">"NFC"</span>}]
}).subscribe(
  <span class="hljs-function"><span class=
"hljs-params">thing</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Found nearby Thing "</span> + thing.name); },
  error =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished successfully"</span>);}
);</pre>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 5</span><span style=
          "text-transform: none">: Discover Things exposed in a
          proprietary way</span>
        </div>
        <pre class="hljs javascript" aria-busy="false"><span class=
        "hljs-keyword">let</span> subscription = wot.discover({
  <span class="hljs-attr">method</span>: <span class=
"hljs-string">"other"</span>,
  <span class="hljs-attr">constraints</span>: [{ <span class=
"hljs-attr">solution</span>: <span class=
"hljs-string">"XYZ123"</span>, <span class=
"hljs-attr">key</span>: <span class="hljs-string">"..."</span>}]
}).subscribe(
  <span class="hljs-function"><span class=
"hljs-params">thing</span> =&gt;</span> { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Found Thing "</span> + thing.name); },
  error =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery error: "</span> + error.message); },
  () =&gt; { <span class=
"hljs-built_in">console</span>.log(<span class=
"hljs-string">"Discovery finished successfully"</span>);}
);</pre>
      </div>
    </section>
  </section>
  <section data-dfn-for="ConsumedThing" id=
  "the-consumedthing-interface">
    <!--OddPage-->
    <h2 id="x4-the-consumedthing-interface"><span class=
    "secno">4.</span> The <dfn data-dfn-for="" data-dfn-type="dfn"
    id="dom-consumedthing" data-idl="" data-title=
    "ConsumedThing"><code>ConsumedThing</code></dfn> interface</h2>
    <p>The <a href="#dom-consumedthing" class="internalDFN"
    data-link-type="dfn"><code>ConsumedThing</code></a> interface
    is a client API for sending requests to servers in order to
    retrieve or update <a href="#dfn-properties" class=
    "internalDFN" data-link-type="dfn">Properties</a>, invoke
    <a href="#dfn-actions" class="internalDFN" data-link-type=
    "dfn">Actions</a>, and observe <a href="#dfn-properties" class=
    "internalDFN" data-link-type="dfn">Properties</a> and <a href=
    "#dfn-events" class="internalDFN" data-link-type=
    "dfn">Events</a>.</p>
    <div>
      <pre class="def idl"><span class="idlInterface" id=
      "idl-def-consumedthing" data-idl="" data-title=
      "ConsumedThing">interface <span class=
      "idlInterfaceID"><a data-no-default="" data-link-for=""
      data-lt="" href="#dom-consumedthing" class="internalDFN"
      data-link-type="dfn"><code>ConsumedThing</code></a></span> {
<span class="idlAttribute" id="idl-def-consumedthing-name"
data-idl="" data-title="name" data-dfn-for=
"consumedthing">    readonly attribute <span class=
"idlAttrType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlAttrName"><a data-no-default=""
data-link-for="consumedthing" data-lt="" href=
"#dom-consumedthing-name" class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
<span class="idlMethod" id=
"idl-def-consumedthing-getthingdescription" data-idl="" data-title=
"getThingDescription" data-dfn-for="consumedthing">    <span class=
"idlMethType"><a href="#dom-thingdescription" class="internalDFN"
data-link-type=
"dfn"><code>ThingDescription</code></a></span> <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="getthingdescription()|getThingDescription" href=
"#dom-consumedthing-getthingdescription" class="internalDFN"
data-link-type="dfn">getThingDescription</a></span>();</span>
<span class="idlMethod" id=
"idl-def-consumedthing-readproperty-name" data-idl="" data-title=
"readProperty" data-dfn-for="consumedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span>     <span class="idlMethName"><a data-no-default=""
data-link-for="consumedthing" data-lt="readproperty()|readProperty"
href="#dom-consumedthing-readproperty" class="internalDFN"
data-link-type="dfn">readProperty</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id=
"idl-def-consumedthing-writeproperty-name-value" data-idl=""
data-title="writeProperty" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span>    <span class="idlMethName"><a data-no-default=""
data-link-for="consumedthing" data-lt=
"writeproperty()|writeProperty" href=
"#dom-consumedthing-writeproperty" class="internalDFN"
data-link-type="dfn">writeProperty</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">value</span></span>);</span>
<span class="idlMethod" id=
"idl-def-consumedthing-invokeaction-name-parameters" data-idl=""
data-title="invokeAction" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span>     <span class="idlMethName"><a data-no-default=""
data-link-for="consumedthing" data-lt="invokeaction()|invokeAction"
href="#dom-consumedthing-invokeaction" class="internalDFN"
data-link-type="dfn">invokeAction</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">parameters</span></span>);</span>
<span class="idlMethod" id=
"idl-def-consumedthing-onpropertychange-name" data-idl=""
data-title="onPropertyChange" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"#dom-observable" class="internalDFN" data-link-type=
"dfn"><code>Observable</code></a></span>       <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="onpropertychange()|onPropertyChange" href=
"#dom-consumedthing-onpropertychange" class="internalDFN"
data-link-type="dfn">onPropertyChange</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-onevent-name"
data-idl="" data-title="onEvent" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"#dom-observable" class="internalDFN" data-link-type=
"dfn"><code>Observable</code></a></span>       <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="onevent()|onEvent" href="#dom-consumedthing-onevent"
class="internalDFN" data-link-type=
"dfn">onEvent</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-consumedthing-ontdchange"
data-idl="" data-title="onTDChange" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"#dom-observable" class="internalDFN" data-link-type=
"dfn"><code>Observable</code></a></span>       <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="ontdchange()|onTDChange" href=
"#dom-consumedthing-ontdchange" class="internalDFN" data-link-type=
"dfn">onTDChange</a></span>();</span>
};</span></pre>
    </div>
    <p><code>ConsumedThing</code> represents a local proxy object
    of the remote <a href="#dfn-things" class="internalDFN"
    data-link-type="dfn">Thing</a>.</p>
    <section id="the-name-property">
      <h3 id="x4-1-the-name-property"><span class=
      "secno">4.1</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-name" data-idl=""
      data-title="name"><code>name</code></dfn> property</h3>
      <p>The <code>name</code> property represents the name of the
      <a href="#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> as specified in the <a href="#dfn-td" class=
      "internalDFN" data-link-type="dfn">TD</a>. In this version it
      is read only.</p>
    </section>
    <section id="the-getthingdescription-method">
      <h3 id="x4-2-the-getthingdescription-method"><span class=
      "secno">4.2</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id=
      "dom-consumedthing-getthingdescription" data-idl=""
      data-title="getThingDescription()" data-lt=
      "getthingdescription()|getThingDescription"><code>getThingDescription()</code></dfn>
      method</h3>
      <p>Returns the <a href="#dfn-thing-descriptions" class=
      "internalDFN" data-link-type="dfn">Thing Description</a> of
      the <a href="#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a>.</p>
      <div class="ednote">
        <div role="heading" class="ednote-title marker" id=
        "h-ednote-6" aria-level="4">
          <span>Editor's note</span>
        </div>
        <p class="">In this version, introspection based on
        <a href="#dfn-td" class="internalDFN" data-link-type=
        "dfn">TD</a> is out of scope. Parsing and exposing <a href=
        "#dfn-thing-descriptions" class="internalDFN"
        data-link-type="dfn">Thing Description</a>s is discussed in
        <a href=
        "https://github.com/w3c/wot-scripting-api/issues/38">Issue
        38</a>.</p>
      </div>
    </section>
    <section id="the-readproperty-method">
      <h3 id="x4-3-the-readproperty-method"><span class=
      "secno">4.3</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-readproperty"
      data-idl="" data-title="readProperty()" data-lt=
      "readproperty()|readProperty"><code>readProperty()</code></dfn>
      method</h3>
      <p>Takes the <a href="#dfn-properties" class="internalDFN"
      data-link-type="dfn">Property</a> name as the <var>name</var>
      argument, then requests from the underlying platform and the
      <a href="#dfn-protocol-bindings" class="internalDFN"
      data-link-type="dfn">Protocol Bindings</a> to retrieve the
      <a href="#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> on the remote <a href="#dfn-things" class=
      "internalDFN" data-link-type="dfn">Thing</a> and return the
      result. Returns a <code><a href="#dfn-promise" class=
      "internalDFN" data-link-type="dfn">Promise</a></code> that
      resolves with the <a href="#dfn-properties" class=
      "internalDFN" data-link-type="dfn">Property</a> value or
      rejects with an <a href="#dfn-error" class="internalDFN"
      data-link-type="dfn">Error</a>.</p>
    </section>
    <section id="the-writeproperty-method">
      <h3 id="x4-4-the-writeproperty-method"><span class=
      "secno">4.4</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-writeproperty"
      data-idl="" data-title="writeProperty()" data-lt=
      "writeproperty()|writeProperty"><code>writeProperty()</code></dfn>
      method</h3>
      <p>Takes the <a href="#dfn-properties" class="internalDFN"
      data-link-type="dfn">Property</a> name as the <var>name</var>
      argument and the new value as the <var>value</var> argument,
      then requests from the underlying platform and the <a href=
      "#dfn-protocol-bindings" class="internalDFN" data-link-type=
      "dfn">Protocol Bindings</a> to update the <a href=
      "#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> on the remote <a href="#dfn-things" class=
      "internalDFN" data-link-type="dfn">Thing</a> and return the
      result. Returns a <code><a href="#dfn-promise" class=
      "internalDFN" data-link-type="dfn">Promise</a></code> that
      resolves on success or rejects with an <a href="#dfn-error"
      class="internalDFN" data-link-type="dfn">Error</a>.</p>
    </section>
    <section id="the-invokeaction-method">
      <h3 id="x4-5-the-invokeaction-method"><span class=
      "secno">4.5</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-invokeaction"
      data-idl="" data-title="invokeAction()" data-lt=
      "invokeaction()|invokeAction"><code>invokeAction()</code></dfn>
      method</h3>
      <p>Takes the <a href="#dfn-actions" class="internalDFN"
      data-link-type="dfn">Action</a> name from the <var>name</var>
      argument and the list of parameters, then requests from the
      underlying platform and the <a href="#dfn-protocol-bindings"
      class="internalDFN" data-link-type="dfn">Protocol
      Bindings</a> to invoke the <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a> on the remote
      <a href="#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> and return the result. Returns a
      <code><a href="#dfn-promise" class="internalDFN"
      data-link-type="dfn">Promise</a></code> that resolves with
      the return value or rejects with an <a href="#dfn-error"
      class="internalDFN" data-link-type="dfn">Error</a>.</p>
    </section>
    <section id="the-onpropertychange-method">
      <h3 id="x4-6-the-onpropertychange-method"><span class=
      "secno">4.6</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-onpropertychange"
      data-idl="" data-title="onPropertyChange()" data-lt=
      "onpropertychange()|onPropertyChange"><code>onPropertyChange()</code></dfn>
      method</h3>
      <p>Returns an <a href="#dom-observable" class="internalDFN"
      data-link-type="dfn"><code>Observable</code></a> for the
      <a href="#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> specified in the <var>name</var> argument,
      allowing subscribing to and unsubscribing from
      notifications.</p>
      <p>The callback function passed to the
      <code>subscribe()</code> method when invoked on the returned
      observer will receive the new property value each time it is
      changed.</p>
    </section>
    <section id="the-onevent-method">
      <h3 id="x4-7-the-onevent-method"><span class=
      "secno">4.7</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-onevent" data-idl=
      "" data-title="onEvent()" data-lt=
      "onevent()|onEvent"><code>onEvent()</code></dfn> method</h3>
      <p>Returns an <a href="#dom-observable" class="internalDFN"
      data-link-type="dfn"><code>Observable</code></a> for the
      <a href="#dfn-events" class="internalDFN" data-link-type=
      "dfn">Event</a> specified in the <var>name</var> argument,
      allowing subscribing to and unsubscribing from
      notifications.</p>
      <p>The callback function passed to the
      <code>subscribe()</code> method when invoked on the returned
      observer will receive the event data each time the event is
      fired.</p>
    </section>
    <section id="the-ontdchange-method">
      <h3 id="x4-8-the-ontdchange-method"><span class=
      "secno">4.8</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-ontdchange"
      data-idl="" data-title="onTDChange()" data-lt=
      "ontdchange()|onTDChange"><code>onTDChange()</code></dfn>
      method</h3>
      <p>Returns an <a href="#dom-observable" class="internalDFN"
      data-link-type="dfn"><code>Observable</code></a>, allowing
      subscribing to and unsubscribing from notifications to the
      <a href="#dfn-thing-descriptions" class="internalDFN"
      data-link-type="dfn">Thing Description</a>.</p>
      <p>The callback function passed to the
      <code>subscribe()</code> method when invoked on the returned
      observer will receive the new <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a> each time it is changed.</p>
    </section>
    <section id="examples-0">
      <h3 id="x4-9-examples"><span class="secno">4.9</span>
      Examples</h3>
      <p>Below a <code><a href="#dom-consumedthing" class=
      "internalDFN" data-link-type=
      "dfn"><code>ConsumedThing</code></a></code> interface example
      is given.</p>
      <div class="example">
        <div class="example-title marker">
          <span>Example 6</span><span style=
          "text-transform: none">: Consume a Thing</span>
        </div>
        <pre class="hljs" aria-busy="false">try {
  let td = await wot.fetch("http://mmyservice.org/mySensor");
  let thing = wot.consume(td);
  console.log("Thing " + thing.name + " has been consumed.");
  let subscription = thing.onPropertyChange("temperature")
    .subscribe(function(value) {
      console.log("Temperature + " has changed to " + value);
    });
  thing.invokeAction("startMeasurement", { units: "Celsius" })
    .then(() =&gt; { console.log("Temperature measurement started."); })
    .catch(e =&gt; {
       console.log("Error starting measurement.");
       subscription.unsubscribe();
     })
} catch(error) {
  console.log("Error during fetch or consume: " + error.message);
};</pre>
      </div>
    </section>
  </section>
  <section data-dfn-for="ExposedThing" id=
  "the-exposedthing-interface">
    <!--OddPage-->
    <h2 id="x5-the-exposedthing-interface"><span class=
    "secno">5.</span> The <dfn data-dfn-for="" data-dfn-type="dfn"
    id="dom-exposedthing" data-idl="" data-title=
    "ExposedThing"><code>ExposedThing</code></dfn> interface</h2>
    <p>The <a href="#dom-exposedthing" class="internalDFN"
    data-link-type="dfn"><code>ExposedThing</code></a> interface is
    the server API that allows defining request handlers,
    properties, <a href="#dfn-actions" class="internalDFN"
    data-link-type="dfn">Actions</a>, and <a href="#dfn-events"
    class="internalDFN" data-link-type="dfn">Events</a> to a
    <a href="#dfn-things" class="internalDFN" data-link-type=
    "dfn">Thing</a>. It also implements the <a href=
    "#dom-consumedthing" class="internalDFN" data-link-type=
    "dfn"><code>ConsumedThing</code></a> interface. An <a href=
    "#dom-exposedthing" class="internalDFN" data-link-type=
    "dfn"><code>ExposedThing</code></a> is created by the <a href=
    "#the-produce-method">produce()</a> method.</p>
    <div class="ednote">
      <div role="heading" class="ednote-title marker" id=
      "h-ednote-7" aria-level="3">
        <span>Editor's note</span>
      </div>
      <p class="">It is under consideration to use a constructor
      for <a href="#dom-exposedthing" class="internalDFN"
      data-link-type="dfn"><code>ExposedThing</code></a> instead of
      a factory method.</p>
    </div>
    <div>
      <pre class="def idl"><span class="idlImplements"><a href=
      "#dom-exposedthing" class="internalDFN" data-link-type=
      "dfn"><code>ExposedThing</code></a> implements <a href=
      "#dom-consumedthing" class="internalDFN" data-link-type=
      "dfn"><code>ConsumedThing</code></a>;</span>

<span class="idlInterface" id="idl-def-exposedthing" data-idl=""
data-title="ExposedThing">interface <span class=
"idlInterfaceID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span> {
<span class=
"idlSectionComment">    // define how to expose and run the Thing</span>
<span class="idlMethod" id="idl-def-exposedthing-start" data-idl=""
data-title="start" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default=""
data-link-for="exposedthing" data-lt="start()|start" href=
"#dom-exposedthing-start" class="internalDFN" data-link-type=
"dfn">start</a></span>();</span>
<span class="idlMethod" id="idl-def-exposedthing-stop" data-idl=""
data-title="stop" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default=""
data-link-for="exposedthing" data-lt="stop()|stop" href=
"#dom-exposedthing-stop" class="internalDFN" data-link-type=
"dfn">stop</a></span>();</span>
<span class="idlMethod" id=
"idl-def-exposedthing-register-directory" data-idl="" data-title=
"register" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default=""
data-link-for="exposedthing" data-lt="register()|register" href=
"#dom-exposedthing-register" class="internalDFN" data-link-type=
"dfn">register</a></span>(<span class=
"idlParam">optional <span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">directory</span></span>);</span>
<span class="idlMethod" id=
"idl-def-exposedthing-unregister-directory" data-idl="" data-title=
"unregister" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default=""
data-link-for="exposedthing" data-lt="unregister()|unregister"
href="#dom-exposedthing-unregister" class="internalDFN"
data-link-type="dfn">unregister</a></span>(<span class=
"idlParam">optional <span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlParamName">directory</span></span>);</span>
<span class="idlMethod" id=
"idl-def-exposedthing-emitevent-eventname-payload" data-idl=""
data-title="emitEvent" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> <span class="idlMethName"><a data-no-default=""
data-link-for="exposedthing" data-lt="emitevent()|emitEvent" href=
"#dom-exposedthing-emitevent" class="internalDFN" data-link-type=
"dfn">emitEvent</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">eventName</span></span>, <span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">payload</span></span>);</span>
<span class=
"idlSectionComment">    // define Thing Description modifiers</span>
<span class="idlMethod" id=
"idl-def-exposedthing-addproperty-property" data-idl="" data-title=
"addProperty" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href="#dom-exposedthing" class="internalDFN"
data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="addproperty()|addProperty" href=
"#dom-exposedthing-addproperty" class="internalDFN" data-link-type=
"dfn">addProperty</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href="#dom-thingproperty" class="internalDFN"
data-link-type=
"dfn"><code>ThingProperty</code></a></span> <span class=
"idlParamName">property</span></span>);</span>
<span class="idlMethod" id=
"idl-def-exposedthing-removeproperty-name" data-idl="" data-title=
"removeProperty" data-dfn-for="exposedthing">    <span class=
"idlMethType"><a href="#dom-exposedthing" class="internalDFN"
data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="removeproperty()|removeProperty" href=
"#dom-exposedthing-removeproperty" class="internalDFN"
data-link-type="dfn">removeProperty</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-addaction-action"
data-idl="" data-title="addAction" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="addaction()|addAction" href="#dom-exposedthing-addaction"
class="internalDFN" data-link-type=
"dfn">addAction</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href="#dom-thingaction" class="internalDFN"
data-link-type=
"dfn"><code>ThingAction</code></a></span> <span class=
"idlParamName">action</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-removeaction-name"
data-idl="" data-title="removeAction" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="removeaction()|removeAction" href=
"#dom-exposedthing-removeaction" class="internalDFN"
data-link-type="dfn">removeAction</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-addevent-event"
data-idl="" data-title="addEvent" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="addevent()|addEvent" href="#dom-exposedthing-addevent"
class="internalDFN" data-link-type=
"dfn">addEvent</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href="#dom-thingevent" class="internalDFN"
data-link-type=
"dfn"><code>ThingEvent</code></a></span> <span class="idlParamName">event</span></span>);</span>
<span class="idlMethod" id="idl-def-exposedthing-removeevent-name"
data-idl="" data-title="removeEvent" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="removeevent()|removeEvent" href=
"#dom-exposedthing-removeevent" class="internalDFN" data-link-type=
"dfn">removeEvent</a></span>(<span class="idlParam"><span class=
"idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>);</span>
<span class=
"idlSectionComment">    // define request handlers</span>
<span class="idlMethod" id=
"idl-def-exposedthing-setpropertyreadhandler-name-readhandler"
data-idl="" data-title="setPropertyReadHandler" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="setpropertyreadhandler()|setPropertyReadHandler" href=
"#dom-exposedthing-setpropertyreadhandler" class="internalDFN"
data-link-type="dfn">setPropertyReadHandler</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>,
                                         <span class=
"idlParam"><span class="idlParamType"><a href=
"#dom-propertyreadhandler" class="internalDFN" data-link-type=
"dfn"><code>PropertyReadHandler</code></a></span> <span class=
"idlParamName">readHandler</span></span>);</span>
<span class="idlMethod" id=
"idl-def-exposedthing-setpropertywritehandler-name-writehandler"
data-idl="" data-title="setPropertyWriteHandler" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="setpropertywritehandler()|setPropertyWriteHandler" href=
"#dom-exposedthing-setpropertywritehandler" class="internalDFN"
data-link-type=
"dfn">setPropertyWriteHandler</a></span>(<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>,
                                          <span class=
"idlParam"><span class="idlParamType"><a href=
"#dom-propertywritehandler" class="internalDFN" data-link-type=
"dfn"><code>PropertyWriteHandler</code></a></span> <span class=
"idlParamName">writeHandler</span></span>);</span>
<span class="idlMethod" id=
"idl-def-exposedthing-setactionhandler-name-action" data-idl=""
data-title="setActionHandler" data-dfn-for=
"exposedthing">    <span class="idlMethType"><a href=
"#dom-exposedthing" class="internalDFN" data-link-type=
"dfn"><code>ExposedThing</code></a></span>  <span class=
"idlMethName"><a data-no-default="" data-link-for="exposedthing"
data-lt="setactionhandler()|setActionHandler" href=
"#dom-exposedthing-setactionhandler" class="internalDFN"
data-link-type="dfn">setActionHandler</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlParamName">name</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#dom-actionhandler"
class="internalDFN" data-link-type=
"dfn"><code>ActionHandler</code></a></span> <span class=
"idlParamName">action</span></span>);</span>
};</span>

<span class="idlCallback" id="idl-def-propertyreadhandler"
data-idl="" data-title="PropertyReadHandler">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-propertyreadhandler" class="internalDFN" data-link-type=
"dfn"><code>PropertyReadHandler</code></a></span> = <span class=
"idlCallbackType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span> ();</span>

<span class="idlCallback" id="idl-def-propertywritehandler"
data-idl="" data-title="PropertyWriteHandler">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-propertywritehandler" class="internalDFN"
data-link-type="dfn"><code>PropertyWriteHandler</code></a></span> = <span class="idlCallbackType"><a href="https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;void&gt;</span> (<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">value</span></span>);</span>

<span class="idlCallback" id="idl-def-actionhandler" data-idl=""
data-title="ActionHandler">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-actionhandler" class="internalDFN" data-link-type=
"dfn"><code>ActionHandler</code></a></span> = <span class=
"idlCallbackType"><a href=
"https://heycam.github.io/webidl/#idl-promise">Promise</a>&lt;<a href="https://heycam.github.io/webidl/#idl-any">any</a>&gt;</span> (<span class="idlParam"><span class="idlParamType"><a href="https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">parameters</span></span>);</span></pre>
    </div>
    <section id="the-start-method">
      <h3 id="x5-1-the-start-method"><span class="secno">5.1</span>
      The <dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id=
      "dom-exposedthing-start" data-idl="" data-title="start()"
      data-lt="start()|start"><code>start()</code></dfn>
      method</h3>
      <p>Start serving external requests for the <a href=
      "#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a>.</p>
    </section>
    <section id="the-stop-method">
      <h3 id="x5-2-the-stop-method"><span class="secno">5.2</span>
      The <dfn data-dfn-for="exposedthing" data-dfn-type="dfn" id=
      "dom-exposedthing-stop" data-idl="" data-title="stop()"
      data-lt="stop()|stop"><code>stop()</code></dfn> method</h3>
      <p>Stop serving external requests for the <a href=
      "#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a>.</p>
    </section>
    <section id="the-register-method">
      <h3 id="x5-3-the-register-method"><span class=
      "secno">5.3</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-register" data-idl=
      "" data-title="register()" data-lt=
      "register()|register"><code>register()</code></dfn>
      method</h3>
      <p>Generates the <a href="#dfn-thing-descriptions" class=
      "internalDFN" data-link-type="dfn">Thing Description</a>
      given the properties, <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Actions</a> and <a href=
      "#dfn-events" class="internalDFN" data-link-type=
      "dfn">Event</a> defined for this object. If a
      <code>directory</code> argument is given, make a request to
      register the <a href="#dfn-thing-descriptions" class=
      "internalDFN" data-link-type="dfn">Thing Description</a> with
      the given WoT repository by invoking its
      <code>register</code> <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a>.</p>
    </section>
    <section id="the-unregister-method">
      <h3 id="x5-4-the-unregister-method"><span class=
      "secno">5.4</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-unregister"
      data-idl="" data-title="unregister()" data-lt=
      "unregister()|unregister"><code>unregister()</code></dfn>
      method</h3>
      <p>If a <code>directory</code> argument is given, make a
      request to unregister the <a href="#dfn-thing-descriptions"
      class="internalDFN" data-link-type="dfn">Thing
      Description</a> with the given WoT repository by invoking its
      <code>unregister</code> <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a>. Then, and in
      the case no arguments were provided to this function, stop
      the <a href="#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> and remove the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>.</p>
    </section>
    <section id="the-emitevent-method">
      <h3 id="x5-5-the-emitevent-method"><span class=
      "secno">5.5</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-emitevent" data-idl=
      "" data-title="emitEvent()" data-lt=
      "emitevent()|emitEvent"><code>emitEvent()</code></dfn>
      method</h3>
      <p>Emits an the event initialized with the event name
      specified by the <code>eventName</code> argument and data
      specified by the <code>payload</code> argument.</p>
    </section>
    <section data-dfn-for="DataSchema" id="the-dataschema-type">
      <h3 id="x5-6-the-dataschema-type"><span class=
      "secno">5.6</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-dataschema" data-idl="" data-title=
      "DataSchema"><code>DataSchema</code></dfn> type</h3>
      <div>
        <pre class="def idl"><span class="idlTypedef" id=
        "idl-def-dataschema" data-idl="" data-title=
        "DataSchema">typedef <span class="idlTypedefType"><a href=
        "https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlTypedefID"><a data-no-default=""
data-link-for="" data-lt="" href="#dom-dataschema" class=
"internalDFN" data-link-type=
"dfn"><code>DataSchema</code></a></span>;</span></pre>
      </div>
      <p>The <a href="#dom-dataschema" class="internalDFN"
      data-link-type="dfn"><code>DataSchema</code></a> type
      represents a data type 
        <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/#dataschema">
      specified</a>
      in the <a href="#dfn-thing-descriptions" class="internalDFN"
      data-link-type="dfn">Thing Description</a> in a serialized
      form.</p>
      <div class="ednote">
        <div role="heading" class="ednote-title marker" id=
        "h-ednote-8" aria-level="4">
          <span>Editor's note</span>
        </div>
        <p class=""><a href="#dom-dataschema" class="internalDFN"
        data-link-type="dfn"><code>DataSchema</code></a> is under
        development, currently it can denote any type supported by
        the <a href="#dfn-thing-descriptions" class="internalDFN"
        data-link-type="dfn">Thing Description</a> and the <a href=
        "#dfn-wot-runtime" class="internalDFN" data-link-type=
        "dfn">WoT Runtime</a>.</p>
      </div>
    </section>
    <section id="the-addproperty-method">
      <h3 id="x5-7-the-addproperty-method"><span class=
      "secno">5.7</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-addproperty"
      data-idl="" data-title="addProperty()" data-lt=
      "addproperty()|addProperty"><code>addProperty()</code></dfn>
      method</h3>
      <p>Adds a <a href="#dfn-properties" class="internalDFN"
      data-link-type="dfn">Property</a> defined by the argument and
      updates the <a href="#dfn-thing-descriptions" class=
      "internalDFN" data-link-type="dfn">Thing Description</a>.
      Throws on error. Returns a reference to the same object for
      supporting chaining.</p>
      <section data-dfn-for="ThingProperty" data-link-for=
      "ThingProperty" id="the-thingproperty-dictionary">
        <h4 id="x5-7-1-the-thingproperty-dictionary"><span class=
        "secno">5.7.1</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-thingproperty" data-idl=""
        data-title="ThingProperty"><code>ThingProperty</code></dfn>
        dictionary</h4>
        <div>
          <pre class="def idl"><span class="idlDictionary" id=
          "idl-def-thingproperty" data-idl="" data-title=
          "ThingProperty">dictionary <span class=
          "idlDictionaryID"><a data-no-default="" data-link-for=""
          data-lt="" href="#dom-thingproperty" class="internalDFN"
          data-link-type=
          "dfn"><code>ThingProperty</code></a></span> : <span class=
          "idlSuperclass"><a href="#dom-semanticannotations" class=
          "internalDFN" data-link-type=
          "dfn"><code>SemanticAnnotations</code></a></span> {
<span class="idlMember" id="idl-def-thingproperty-name" data-idl=""
data-title="name" data-dfn-for=
"thingproperty">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlMemberName"><a data-no-default=""
data-link-for="thingproperty" data-lt="" href=
"#dom-thingproperty-name" class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingproperty-schema" data-idl=
"" data-title="schema" data-dfn-for=
"thingproperty">    required <span class="idlMemberType"><a href=
"#dom-dataschema" class="internalDFN" data-link-type=
"dfn"><code>DataSchema</code></a></span> <span class=
"idlMemberName"><a data-no-default="" data-link-for="thingproperty"
data-lt="" href="#dom-thingproperty-schema" class="internalDFN"
data-link-type="dfn"><code>schema</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingproperty-value" data-idl=
"" data-title="value" data-dfn-for=
"thingproperty">             <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-any">any</a></span>        <span class="idlMemberName"><a data-no-default=""
data-link-for="thingproperty" data-lt="" href=
"#dom-thingproperty-value" class="internalDFN" data-link-type=
"dfn"><code>value</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingproperty-writable"
data-idl="" data-title="writable" data-dfn-for=
"thingproperty">             <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>    <span class="idlMemberName"><a data-no-default=""
data-link-for="thingproperty" data-lt="" href=
"#dom-thingproperty-writable" class="internalDFN" data-link-type=
"dfn"><code>writable</code></a></span> = <span class=
"idlMemberValue">false</span>;</span>
<span class="idlMember" id="idl-def-thingproperty-observable"
data-idl="" data-title="observable" data-dfn-for=
"thingproperty">             <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-boolean">boolean</a></span>    <span class="idlMemberName"><a data-no-default=""
data-link-for="thingproperty" data-lt="" href=
"#dom-thingproperty-observable" class="internalDFN" data-link-type=
"dfn"><code>observable</code></a></span> = <span class=
"idlMemberValue">false</span>;</span>
};</span></pre>
        </div>
        <p>Represents the <a href="#dfn-things" class="internalDFN"
        data-link-type="dfn">Thing</a> <a href="#dfn-properties"
        class="internalDFN" data-link-type="dfn">Property</a>
        description.</p>
        <ul>
          <li>The <dfn data-dfn-for="thingproperty"
            data-dfn-type="dfn" id="dom-thingproperty-name"
            data-idl="" data-title="name"><code>name</code></dfn>
            attribute represents the name of the <a href=
            "#dfn-properties" class="internalDFN" data-link-type=
            "dfn">Property</a>.
          </li>
          <li>The <dfn data-dfn-for="thingproperty"
            data-dfn-type="dfn" id="dom-thingproperty-schema"
            data-idl="" data-title=
            "schema"><code>schema</code></dfn> attribute represents
            the data type for the <a href="#dfn-properties" class=
            "internalDFN" data-link-type="dfn">Property</a>
            described by <a href="#dom-dataschema" class=
            "internalDFN" data-link-type=
            "dfn"><code>DataSchema</code></a>.
          </li>
          <li>The <dfn data-dfn-for="thingproperty"
            data-dfn-type="dfn" id="dom-thingproperty-value"
            data-idl="" data-title="value"><code>value</code></dfn>
            attribute represents the value of the <a href=
            "#dfn-properties" class="internalDFN" data-link-type=
            "dfn">Property</a>.
          </li>
          <li>The <dfn data-dfn-for="thingproperty"
            data-dfn-type="dfn" id="dom-thingproperty-writable"
            data-idl="" data-title=
            "writable"><code>writable</code></dfn> attribute
            defines whether the <a href="#dfn-properties" class=
            "internalDFN" data-link-type="dfn">Property</a> can be
            updated. The default value is <code>false</code>.
          </li>
          <li>The <dfn data-dfn-for="thingproperty"
            data-dfn-type="dfn" id="dom-thingproperty-observable"
            data-idl="" data-title=
            "observable"><code>observable</code></dfn> attribute
            defines whether the <a href="#dfn-properties" class=
            "internalDFN" data-link-type="dfn">Property</a> changes
            can be observed by an external client. The default
            value is <code>false</code>.
          </li>
        </ul>
      </section>
    </section>
    <section id="the-removeproperty-method">
      <h3 id="x5-8-the-removeproperty-method"><span class=
      "secno">5.8</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-removeproperty"
      data-idl="" data-title="removeProperty()" data-lt=
      "removeproperty()|removeProperty"><code>removeProperty()</code></dfn>
      method</h3>
      <p>Removes the <a href="#dfn-properties" class="internalDFN"
      data-link-type="dfn">Property</a> specified by the
      <code>name</code> argument and updates the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>. Throws on error. Returns a
      reference to the same object for supporting chaining.</p>
    </section>
    <section id="the-addaction-method">
      <h3 id="x5-9-the-addaction-method"><span class=
      "secno">5.9</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-addaction" data-idl=
      "" data-title="addAction()" data-lt=
      "addaction()|addAction"><code>addAction()</code></dfn>
      method</h3>
      <p>Adds an <a href="#dfn-actions" class="internalDFN"
      data-link-type="dfn">Action</a> to the <a href="#dfn-things"
      class="internalDFN" data-link-type="dfn">Thing</a> object as
      defined by the <code>action</code> argument of type <a href=
      "#dom-thingaction" class="internalDFN" data-link-type=
      "dfn"><code>ThingAction</code></a> and updates the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>. Throws on error. Returns a
      reference to the same object for supporting chaining.</p>
      <section data-dfn-for="ThingAction" id=
      "the-thingaction-dictionary">
        <h4 id="x5-9-1-the-thingaction-dictionary"><span class=
        "secno">5.9.1</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-thingaction" data-idl=""
        data-title="ThingAction"><code>ThingAction</code></dfn>
        dictionary</h4>
        <div>
          <pre class="def idl"><span class="idlDictionary" id=
          "idl-def-thingaction" data-idl="" data-title=
          "ThingAction">dictionary <span class=
          "idlDictionaryID"><a data-no-default="" data-link-for=""
          data-lt="" href="#dom-thingaction" class="internalDFN"
          data-link-type=
          "dfn"><code>ThingAction</code></a></span> : <span class=
          "idlSuperclass"><a href="#dom-semanticannotations" class=
          "internalDFN" data-link-type=
          "dfn"><code>SemanticAnnotations</code></a></span> {
<span class="idlMember" id="idl-def-thingaction-name" data-idl=""
data-title="name" data-dfn-for=
"thingaction">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlMemberName"><a data-no-default=""
data-link-for="thingaction" data-lt="" href="#dom-thingaction-name"
class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingaction-inputschema"
data-idl="" data-title="inputSchema" data-dfn-for=
"thingaction">             <span class="idlMemberType"><a href=
"#dom-dataschema" class="internalDFN" data-link-type=
"dfn"><code>DataSchema</code></a></span> <span class=
"idlMemberName"><a data-no-default="" data-link-for="thingaction"
data-lt="" href="#dom-thingaction-inputschema" class="internalDFN"
data-link-type="dfn"><code>inputSchema</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingaction-outputschema"
data-idl="" data-title="outputSchema" data-dfn-for=
"thingaction">             <span class="idlMemberType"><a href=
"#dom-dataschema" class="internalDFN" data-link-type=
"dfn"><code>DataSchema</code></a></span> <span class=
"idlMemberName"><a data-no-default="" data-link-for="thingaction"
data-lt="" href="#dom-thingaction-outputschema" class="internalDFN"
data-link-type="dfn"><code>outputSchema</code></a></span>;</span>
};</span></pre>
        </div>
        <p>The <a href="#dom-thingaction" class="internalDFN"
        data-link-type="dfn"><code>ThingAction</code></a>
        dictionary describes the arguments and the return
        value.</p>
        <ul>
          <li>The <dfn data-dfn-for="thingaction" data-dfn-type=
          "dfn" id="dom-thingaction-name" data-idl="" data-title=
          "name"><code>name</code></dfn> attribute provides the
          <a href="#dfn-actions" class="internalDFN"
            data-link-type="dfn">Action</a> name.
          </li>
          <li>The <dfn data-dfn-for="thingaction" data-dfn-type=
          "dfn" id="dom-thingaction-inputschema" data-idl=""
          data-title="inputSchema"><code>inputSchema</code></dfn>
          attribute provides the description of the input arguments
          (argument list is represented by an object). If missing,
          it means the action does not accept arguments.</li>
          <li>The <dfn data-dfn-for="thingaction" data-dfn-type=
          "dfn" id="dom-thingaction-outputschema" data-idl=""
          data-title="outputSchema"><code>outputSchema</code></dfn>
          attribute provides the description of the returned data.
          If missing, it means the action does not return
          data.</li>
        </ul>
      </section>
    </section>
    <section id="the-removeaction-method">
      <h3 id="x5-10-the-removeaction-method"><span class=
      "secno">5.10</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-removeaction"
      data-idl="" data-title="removeAction()" data-lt=
      "removeaction()|removeAction"><code>removeAction()</code></dfn>
      method</h3>
      <p>Removes the <a href="#dfn-actions" class="internalDFN"
      data-link-type="dfn">Action</a> specified by the
      <code>name</code> argument and updates the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>. Throws on error. Returns a
      reference to the same object for supporting chaining.</p>
    </section>
    <section id="the-addevent-method">
      <h3 id="x5-11-the-addevent-method"><span class=
      "secno">5.11</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-addevent" data-idl=
      "" data-title="addEvent()" data-lt=
      "addevent()|addEvent"><code>addEvent()</code></dfn>
      method</h3>
      <p>Adds an event to the <a href="#dfn-things" class=
      "internalDFN" data-link-type="dfn">Thing</a> object as
      defined by the <code>event</code> argument of type <a href=
      "#dom-thingevent" class="internalDFN" data-link-type=
      "dfn"><code>ThingEvent</code></a> and updates the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a>. Throws on error. Returns a
      reference to the same object for supporting chaining.</p>
      <section data-dfn-for="ThingEvent" id=
      "the-thingevent-dictionary">
        <h4 id="x5-11-1-the-thingevent-dictionary"><span class=
        "secno">5.11.1</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-thingevent" data-idl=""
        data-title="ThingEvent"><code>ThingEvent</code></dfn>
        dictionary</h4>
        <div>
          <pre class="def idl"><span class="idlDictionary" id=
          "idl-def-thingevent" data-idl="" data-title=
          "ThingEvent">dictionary <span class=
          "idlDictionaryID"><a data-no-default="" data-link-for=""
          data-lt="" href="#dom-thingevent" class="internalDFN"
          data-link-type=
          "dfn"><code>ThingEvent</code></a></span> : <span class=
          "idlSuperclass"><a href="#dom-semanticannotations" class=
          "internalDFN" data-link-type=
          "dfn"><code>SemanticAnnotations</code></a></span> {
<span class="idlMember" id="idl-def-thingevent-name" data-idl=""
data-title="name" data-dfn-for=
"thingevent">    required <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span>  <span class="idlMemberName"><a data-no-default=""
data-link-for="thingevent" data-lt="" href="#dom-thingevent-name"
class="internalDFN" data-link-type=
"dfn"><code>name</code></a></span>;</span>
<span class="idlMember" id="idl-def-thingevent-schema" data-idl=""
data-title="schema" data-dfn-for=
"thingevent">             <span class="idlMemberType"><a href=
"#dom-dataschema" class="internalDFN" data-link-type=
"dfn"><code>DataSchema</code></a></span> <span class=
"idlMemberName"><a data-no-default="" data-link-for="thingevent"
data-lt="" href="#dom-thingevent-schema" class="internalDFN"
data-link-type="dfn"><code>schema</code></a></span>;</span>
};</span></pre>
        </div>
        <ul>
          <li>The <dfn data-dfn-for="thingevent" data-dfn-type=
          "dfn" id="dom-thingevent-name" data-idl="" data-title=
          "name"><code>name</code></dfn> attribute represents the
          event name.</li>
          <li>The <dfn data-dfn-for="thingevent" data-dfn-type=
          "dfn" id="dom-thingevent-schema" data-idl="" data-title=
          "schema"><code>schema</code></dfn> attribute represents
          the type of the data that is attached to the event. If
          missing, it means the event does not carry data.</li>
        </ul>
      </section>
    </section>
    <section id="the-removeevent-method">
      <h3 id="x5-12-the-removeevent-method"><span class=
      "secno">5.12</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-removeevent"
      data-idl="" data-title="removeEvent()" data-lt=
      "removeevent()|removeEvent"><code>removeEvent()</code></dfn>
      method</h3>
      <p>Removes the event specified by the <code>name</code>
      argument and updates the <a href="#dfn-thing-descriptions"
      class="internalDFN" data-link-type="dfn">Thing
      Description</a>. Returns a reference to the same object for
      supporting chaining.</p>
    </section>
    <section data-dfn-for="PropertyReadHandler" id=
    "the-propertyreadhandler-callback">
      <h3 id="x5-13-the-propertyreadhandler-callback"><span class=
      "secno">5.13</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-propertyreadhandler" data-idl="" data-title=
      "PropertyReadHandler"><code>PropertyReadHandler</code></dfn>
      callback</h3>
      <p>A function that returns a Promise and resolves it with the
      value of the <a href="#dfn-properties" class="internalDFN"
      data-link-type="dfn">Property</a> matching the
      <code>name</code> argument to the
      <code>setPropertyReadHandler</code> function, or rejects with
      an error if the property is not found or the value cannot be
      retrieved.</p>
    </section>
    <section data-dfn-for="PropertyWriteHandler" id=
    "the-propertywritehandler-callback">
      <h3 id="x5-14-the-propertywritehandler-callback"><span class=
      "secno">5.14</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-propertywritehandler" data-idl="" data-title=
      "PropertyWriteHandler"><code>PropertyWriteHandler</code></dfn>
      callback</h3>
      <p>A function called with <code>value</code> as argument that
      returns a Promise which is resolved when the value of the
      <a href="#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> matching the <code>name</code> argument to
      the <code>setPropertyReadHandler</code> function is updated
      with <code>value</code>, or rejects with an error if the
      property is not found or the value cannot be updated.</p>
      <div class="ednote">
        <div role="heading" class="ednote-title marker" id=
        "h-ednote-9" aria-level="4">
          <span>Editor's note</span>
        </div>
        <p class="">Note that this function is invoked by
        implementations before the property is updated, so the code
        in this callback function can invoke the
        <code>readProperty()</code> method to find out the old
        value of the property, if needed. Therefore the old value
        is not provided to this method.</p>
      </div>
    </section>
    <section data-dfn-for="ActionHandler" id=
    "the-actionhandler-callback">
      <h3 id="x5-15-the-actionhandler-callback"><span class=
      "secno">5.15</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-actionhandler" data-idl="" data-title=
      "ActionHandler"><code>ActionHandler</code></dfn>
      callback</h3>
      <p>A function called with a <code>parameters</code>
      dictionary argument assembled by the <a href=
      "#dfn-wot-runtime" class="internalDFN" data-link-type=
      "dfn">WoT runtime</a> based on the <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a> and the external client request.
      It returns a Promise that rejects with an error or resolves
      if the action is successful or ongoing (may also resolve with
      a control object such as an <a href="#dom-observable" class=
      "internalDFN" data-link-type=
      "dfn"><code>Observable</code></a> for actions that need
      progress notifications or that can be canceled).</p>
    </section>
    <section id="the-setpropertyreadhandler-method">
      <h3 id="x5-16-the-setpropertyreadhandler-method"><span class=
      "secno">5.16</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id=
      "dom-exposedthing-setpropertyreadhandler" data-idl=""
      data-title="setPropertyReadHandler()" data-lt=
      "setpropertyreadhandler()|setPropertyReadHandler"><code>setPropertyReadHandler()</code></dfn>
      method</h3>
      <p>Takes <code>name</code> as string argument and
      <code>readHandler</code> as argument of type <a href=
      "#dom-propertyreadhandler" class="internalDFN"
      data-link-type="dfn"><code>PropertyReadHandler</code></a>.
      Sets the handler function for reading the specified <a href=
      "#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> matched by <code>name</code>. Throws on
      error. Returns a reference to the same object for supporting
      chaining.</p>
      <p>The <code>readHandler</code> callback function will
      implement reading a <a href="#dfn-properties" class=
      "internalDFN" data-link-type="dfn">Property</a> and
      <em class="rfc2119" title="SHOULD">SHOULD</em> be called by
      implementations when a request for reading a <a href=
      "#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> is received from the underlying
      platform.</p>
      <p>There <em class="rfc2119" title="SHOULD">SHOULD</em> be at
      most one handler for any given <a href="#dfn-properties"
      class="internalDFN" data-link-type="dfn">Property</a> and
      newly added handlers replace the old handlers. If no handler
      is initialized for any given <a href="#dfn-properties" class=
      "internalDFN" data-link-type="dfn">Property</a>,
      implementations <em class="rfc2119" title=
      "SHOULD">SHOULD</em> implement a default property read
      handler.</p>
    </section>
    <section id="the-setpropertywritehandler-method">
      <h3 id="x5-17-the-setpropertywritehandler-method">
      <span class="secno">5.17</span> The <dfn data-dfn-for=
      "exposedthing" data-dfn-type="dfn" id=
      "dom-exposedthing-setpropertywritehandler" data-idl=""
      data-title="setPropertyWriteHandler()" data-lt=
      "setpropertywritehandler()|setPropertyWriteHandler"><code>setPropertyWriteHandler()</code></dfn>
      method</h3>
      <p>Takes <code>name</code> as string argument and
      <code>writeHandler</code> as argument of type <a href=
      "#dom-propertywritehandler" class="internalDFN"
      data-link-type="dfn"><code>PropertyWriteHandler</code></a>.
      Sets the handler function for writing the specified <a href=
      "#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> matched by <code>name</code>. Throws on
      error. Returns a reference to the same object for supporting
      chaining.</p>
      <p>There <em class="rfc2119" title="SHOULD">SHOULD</em> be at
      most one write handler for any given <a href=
      "#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a> and newly added handlers replace the old
      handlers. If no write handler is initialized for any given
      <a href="#dfn-properties" class="internalDFN" data-link-type=
      "dfn">Property</a>, implementations <em class="rfc2119"
      title="SHOULD">SHOULD</em> implement default property update
      and notifying observers on change.</p>
    </section>
    <section id="the-setactionhandler-method">
      <h3 id="x5-18-the-setactionhandler-method"><span class=
      "secno">5.18</span> The <dfn data-dfn-for="exposedthing"
      data-dfn-type="dfn" id="dom-exposedthing-setactionhandler"
      data-idl="" data-title="setActionHandler()" data-lt=
      "setactionhandler()|setActionHandler"><code>setActionHandler()</code></dfn>
      method</h3>
      <p>Takes <code>name</code> as string argument and
      <code>action</code> as argument of type <a href=
      "#dom-actionhandler" class="internalDFN" data-link-type=
      "dfn"><code>ActionHandler</code></a>. Sets the handler
      function for the specified <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a> matched by
      <code>name</code>. Throws on error. Returns a reference to
      the same object for supporting chaining.</p>
      <p>If provided, this callback function will implement
      invoking an <a href="#dfn-actions" class="internalDFN"
      data-link-type="dfn">Action</a> and <em class="rfc2119"
      title="SHOULD">SHOULD</em> be called by implementations when
      a request for invoking a <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a> is received
      from the underlying platform. The callback will receive a
      <code>parameters</code> dictionary argument.</p>
      <p>There <em class="rfc2119" title="SHOULD">SHOULD</em> be
      exactly one handler for any given <a href="#dfn-actions"
      class="internalDFN" data-link-type="dfn">Action</a>. If no
      handler is initialized for any given <a href="#dfn-actions"
      class="internalDFN" data-link-type="dfn">Action</a>,
      implementations <em class="rfc2119" title=
      "SHOULD">SHOULD</em> return error if the action is invoked by
      any client.</p>
    </section>
    <section id="examples-1">
      <h3 id="x5-19-examples"><span class="secno">5.19</span>
      Examples</h3>
      <p>Below some <code><a href="#dom-exposedthing" class=
      "internalDFN" data-link-type=
      "dfn"><code>ExposedThing</code></a></code> interface examples
      are given.</p>
      <div class="example">
        <div class="example-title marker">
          <span>Example 7</span><span style=
          "text-transform: none">: Create a new blank exposed
          Thing</span>
        </div>
        <pre class="highlight hljs javascript" aria-busy="false">
        <span class="hljs-keyword">try</span> {
  <span class=
"hljs-keyword">var</span> thing = WoT.produce({ <span class=
"hljs-attr">name</span>: <span class=
"hljs-string">"tempSensor"</span> });
  <span class="hljs-comment">// manually add Interactions</span>
  thing.addProperty({
    <span class="hljs-attr">name</span>: <span class=
"hljs-string">"temperature"</span>,
    <span class="hljs-attr">value</span>: <span class=
"hljs-number">0.0</span>,
    <span class="hljs-attr">schema</span>: <span class=
"hljs-string">'{ "type": "number" }'</span>
    <span class=
"hljs-comment">// use default values for the rest</span>
  }).addProperty({
    <span class="hljs-attr">name</span>: <span class=
"hljs-string">"max"</span>,
    <span class="hljs-attr">value</span>: <span class=
"hljs-number">0.0</span>,
    <span class="hljs-attr">schema</span>: <span class=
"hljs-string">'{ "type": "number" }'</span>
    <span class=
"hljs-comment">// use default values for the rest</span>
  }).addAction({
    <span class="hljs-attr">name</span>: <span class=
"hljs-string">"reset"</span>,
    <span class="hljs-comment">// no input, no output</span>
  }).addEvent({
    <span class="hljs-attr">name</span>: <span class=
"hljs-string">"onchange"</span>,
    <span class="hljs-attr">schema</span>: <span class=
"hljs-string">'{ "type": "number" }'</span>
  });
  <span class="hljs-comment">// add server functionality</span>
  thing.setActionHandler(<span class=
"hljs-string">"reset"</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Resetting maximum"</span>);
    thing.writeProperty(<span class=
"hljs-string">"max"</span>, <span class="hljs-number">0.0</span>);
  });
  thing.start().then(<span class="hljs-function"><span class=
"hljs-params">()</span> =&gt;</span> {
      thing.register();
  });
  <span class="hljs-comment">// define Thing business logic</span>
  setInterval( <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class=
"hljs-built_in">Math</span>.random()*<span class=
"hljs-number">100</span>;
    thing.writeProperty(<span class=
"hljs-string">"temperature"</span>, mock);
    <span class="hljs-keyword">let</span> old = <span class=
"hljs-keyword">await</span> thing.readProperty(<span class=
"hljs-string">"max"</span>);
    <span class="hljs-keyword">if</span> (old &lt; mock) {
      thing.writeProperty(<span class=
"hljs-string">"max"</span>, mock);
      thing.emitEvent(<span class="hljs-string">"onchange"</span>);
    }
  }, <span class="hljs-number">1000</span>);
} <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Error creating ExposedThing: "</span> + err);
}</pre>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 8</span><span style=
          "text-transform: none">: Create a new exposed Thing from
          a Thing Description</span>
        </div>
        <pre class="highlight hljs javascript" aria-busy="false">
        <span class=
        "hljs-keyword">let</span> thingDescription = <span class=
        "hljs-string">'{ "@context": [ "https://w3c.github.io/wot/w3c-wot-td-context.jsonld", "https://w3c.github.io/wot/w3c-wot-common-context.jsonld" ], "@type": [ "Thing", "Sensor" ], "name": "mySensor", "geo:location": "testspace", "interaction": [ { "@type": [ "Property", "Temperature" ], "name": "prop1", "schema": { "type": "number" }, "saref:TemperatureUnit": "degree_Celsius" } ] }'</span>;
<span class="hljs-keyword">try</span> {
  <span class=
"hljs-comment">// note that produce() fails if thingDescription contains error</span>
  <span class=
"hljs-keyword">let</span> thing = WoT.produce(thingDescription);
  <span class=
"hljs-comment">// Interactions were added from TD</span>
  <span class=
"hljs-comment">// WoT adds generic handler for reading any property</span>
  <span class=
"hljs-comment">// define a specific handler for one property</span>
  <span class="hljs-keyword">let</span> name = <span class=
"hljs-string">"examplePropertyName"</span>;
  thing.setPropertyReadHandler(name, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Handling read request for "</span> + name);
    <span class="hljs-keyword">return</span> <span class=
"hljs-keyword">new</span> <span class=
"hljs-built_in">Promise</span>(<span class=
"hljs-function">(<span class=
"hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class=
"hljs-keyword">let</span> examplePropertyValue = <span class=
"hljs-number">5</span>;
        resolve(examplePropertyValue);
      },
      e =&gt; {
        <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Error"</span>);
      });
  });
  thing.start();
} <span class="hljs-keyword">catch</span>(err) {
   <span class="hljs-built_in">console</span>.log(<span class=
"hljs-string">"Error creating ExposedThing: "</span> + err);
}</pre>
      </div>
      <div class="example">
        <div class="example-title marker">
          <span>Example 9</span><span style=
          "text-transform: none">: Create a new exposed Thing from
          a TD URI</span>
        </div>
        <pre class="highlight hljs javascript" aria-busy="false">
        <span class=
        "hljs-comment">// fetch an external TD, e.g., to set up a proxy for that Thing</span>
WoT.fetch(<span class=
"hljs-string">"http://myservice.org/mySensor/description"</span>).then(<span class="hljs-function"><span class="hljs-params">td</span> =&gt;</span> {
  <span class=
"hljs-comment">// WoT.produce() ignores instance-specific metadata (security, form)</span>
  <span class="hljs-keyword">let</span> thing = WoT.produce(td);
  <span class=
"hljs-comment">// Interactions were added from TD</span>
  <span class="hljs-comment">// add server functionality</span>
  <span class="hljs-comment">// ...</span>
});</pre>
      </div>
    </section>
  </section>
  <section class="informative" data-dfn-for="ConsumedThing" id=
  "experimental-extensions-to-the-consumedthing-interface">
    <!--OddPage-->
    <h2 id=
    "x6-experimental-extensions-to-the-consumedthing-interface">
    <span class="secno">6.</span> Experimental extensions to the
    <strong>ConsumedThing</strong> interface</h2>
    <p><em>This section is non-normative.</em></p>
    <p>The <a href="#dom-thingdescription" class="internalDFN"
    data-link-type="dfn"><code>ThingDescription</code></a> related
    functionality, such as enumerating <a href="#dfn-properties"
    class="internalDFN" data-link-type="dfn">Properties</a>,
    <a href="#dfn-actions" class="internalDFN" data-link-type=
    "dfn">Action</a>s, <a href="#dfn-events" class="internalDFN"
    data-link-type="dfn">Event</a>s and links (introspection) is an
    API extension that is out of scope for this specification.
    However, the draft interfaces are defined here for informative
    purposes.</p>
    <div>
      <pre class="def idl"><span class="idlInterface" id=
      "idl-def-consumedthing-partial-1" data-idl="" data-title=
      "ConsumedThing">partial interface <span class=
      "idlInterfaceID"><a data-no-default="" data-link-for=""
      data-lt="" href="#dom-consumedthing" class="internalDFN"
      data-link-type="dfn"><code>ConsumedThing</code></a></span> {
<span class="idlMethod" id="idl-def-consumedthing-getproperties"
data-idl="" data-title="getProperties" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-thingproperty"
class="internalDFN" data-link-type=
"dfn"><code>ThingProperty</code></a>&gt;</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="getproperties()|getProperties" href=
"#dom-consumedthing-getproperties" class="internalDFN"
data-link-type="dfn">getProperties</a></span>();</span>
<span class="idlMethod" id="idl-def-consumedthing-getactions"
data-idl="" data-title="getActions" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-thingaction"
class="internalDFN" data-link-type=
"dfn"><code>ThingAction</code></a>&gt;</span>   <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="getactions()|getActions" href=
"#dom-consumedthing-getactions" class="internalDFN" data-link-type=
"dfn">getActions</a></span>();</span>
<span class="idlMethod" id="idl-def-consumedthing-getevents"
data-idl="" data-title="getEvents" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-thingevent"
class="internalDFN" data-link-type=
"dfn"><code>ThingEvent</code></a>&gt;</span>    <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="getevents()|getEvents" href="#dom-consumedthing-getevents"
class="internalDFN" data-link-type=
"dfn">getEvents</a></span>();</span>
<span class="idlMethod" id="idl-def-consumedthing-getlinks"
data-idl="" data-title="getLinks" data-dfn-for=
"consumedthing">    <span class="idlMethType"><a href=
"https://heycam.github.io/webidl/#idl-sequence">sequence</a>&lt;<a href="#dom-tdlink"
class="internalDFN" data-link-type=
"dfn"><code>TDLink</code></a>&gt;</span>        <span class=
"idlMethName"><a data-no-default="" data-link-for="consumedthing"
data-lt="getlinks()|getLinks" href="#dom-consumedthing-getlinks"
class="internalDFN" data-link-type=
"dfn">getLinks</a></span>();</span>
};</span></pre>
    </div>
    <section id="the-getproperties-method">
      <h3 id="x6-1-the-getproperties-method"><span class=
      "secno">6.1</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-getproperties"
      data-idl="" data-title="getProperties()" data-lt=
      "getproperties()|getProperties"><code>getProperties()</code></dfn>
      method</h3>
      <p>Returns the list of <a href="#dfn-properties" class=
      "internalDFN" data-link-type="dfn">Properties</a> defined in
      the <a href="#dfn-thing-descriptions" class="internalDFN"
      data-link-type="dfn">Thing Description</a> of the <a href=
      "#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> in the form of a list of <a href=
      "#dom-thingproperty" class="internalDFN" data-link-type=
      "dfn"><code>ThingProperty</code></a> objects.</p>
    </section>
    <section id="the-getactions-method">
      <h3 id="x6-2-the-getactions-method"><span class=
      "secno">6.2</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-getactions"
      data-idl="" data-title="getActions()" data-lt=
      "getactions()|getActions"><code>getActions()</code></dfn>
      method</h3>
      <p>Returns the list of <a href="#dfn-actions" class=
      "internalDFN" data-link-type="dfn">Action</a>s defined in the
      <a href="#dfn-thing-descriptions" class="internalDFN"
      data-link-type="dfn">Thing Description</a> of the <a href=
      "#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> in the form of a list of <a href=
      "#dom-thingaction" class="internalDFN" data-link-type=
      "dfn"><code>ThingAction</code></a> objects.</p>
    </section>
    <section id="the-getevents-method">
      <h3 id="x6-3-the-getevents-method"><span class=
      "secno">6.3</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-getevents"
      data-idl="" data-title="getEvents()" data-lt=
      "getevents()|getEvents"><code>getEvents()</code></dfn>
      method</h3>
      <p>Returns the list of <a href="#dfn-events" class=
      "internalDFN" data-link-type="dfn">Event</a>s defined in the
      <a href="#dfn-thing-descriptions" class="internalDFN"
      data-link-type="dfn">Thing Description</a> of the <a href=
      "#dfn-things" class="internalDFN" data-link-type=
      "dfn">Thing</a> in the form of a list of <a href=
      "#dom-thingevent" class="internalDFN" data-link-type=
      "dfn"><code>ThingEvent</code></a> objects.</p>
    </section>
    <section id="the-getlinks-method">
      <h3 id="x6-4-the-getlinks-method"><span class=
      "secno">6.4</span> The <dfn data-dfn-for="consumedthing"
      data-dfn-type="dfn" id="dom-consumedthing-getlinks" data-idl=
      "" data-title="getLinks()" data-lt=
      "getlinks()|getLinks"><code>getLinks()</code></dfn>
      method</h3>
      <p>Returns the list of linked resources in <a href=
      "#dfn-thing-descriptions" class="internalDFN" data-link-type=
      "dfn">Thing Description</a> of the <a href="#dfn-things"
      class="internalDFN" data-link-type="dfn">Thing</a> in the
      form of a list of <a href="#dom-tdlink" class="internalDFN"
      data-link-type="dfn"><code>TDLink</code></a> objects.</p>
      <section data-dfn-for="TDLink" id="the-tdlink-dictionary">
        <h4 id="x6-4-1-the-tdlink-dictionary"><span class=
        "secno">6.4.1</span> The <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-tdlink" data-idl="" data-title=
        "TDLink"><code>TDLink</code></dfn> dictionary</h4>
        <p>Contains a hyperlink reference, a relation type and a
        media type.</p>
        <div>
          <pre class="def idl"><span class="idlDictionary" id=
          "idl-def-tdlink" data-idl="" data-title=
          "TDLink">dictionary <span class=
          "idlDictionaryID"><a data-no-default="" data-link-for=""
          data-lt="" href="#dom-tdlink" class="internalDFN"
          data-link-type="dfn"><code>TDLink</code></a></span> {
<span class="idlMember" id="idl-def-tdlink-href" data-idl=""
data-title="href" data-dfn-for="tdlink">    required <span class=
"idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="tdlink" data-lt="" href="#dom-tdlink-href" class=
"internalDFN" data-link-type=
"dfn"><code>href</code></a></span>;</span>
<span class="idlMember" id="idl-def-tdlink-mediatype" data-idl=""
data-title="mediaType" data-dfn-for=
"tdlink">             <span class="idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-USVString">USVString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="tdlink" data-lt="" href="#dom-tdlink-mediatype"
class="internalDFN" data-link-type=
"dfn"><code>mediaType</code></a></span>;</span>
<span class="idlMember" id="idl-def-tdlink-rel" data-idl=""
data-title="rel" data-dfn-for="tdlink">             <span class=
"idlMemberType"><a href=
"https://heycam.github.io/webidl/#idl-DOMString">DOMString</a></span> <span class="idlMemberName"><a data-no-default=""
data-link-for="tdlink" data-lt="" href="#dom-tdlink-rel" class=
"internalDFN" data-link-type=
"dfn"><code>rel</code></a></span>;</span>
};</span></pre>
        </div>
        <p>The <a href="#dom-tdlink" class="internalDFN"
        data-link-type="dfn"><code>TDLink</code></a> dictionary
        contains the following properties:</p>
        <ul>
          <li>The <dfn data-dfn-for="tdlink" data-dfn-type="dfn"
            id="dom-tdlink-href" data-idl="" data-title=
            "href"><code>href</code></dfn> attribute represents a
            <a href="#dfn-hyperlink-reference" class="internalDFN"
            data-link-type="dfn">hyperlink reference</a>.
          </li>
          <li>The <dfn data-dfn-for="tdlink" data-dfn-type="dfn"
            id="dom-tdlink-rel" data-idl="" data-title=
            "rel"><code>rel</code></dfn> attribute represents a
            <a href="#dfn-relation-type" class="internalDFN"
            data-link-type="dfn">relation type</a>.
          </li>
          <li>The <dfn data-dfn-for="tdlink" data-dfn-type="dfn"
            id="dom-tdlink-mediatype" data-idl="" data-title=
            "mediaType"><code>mediaType</code></dfn> attribute
            represents a <a href="#dfn-iana-media-type" class=
            "internalDFN" data-link-type="dfn">IANA media type</a>.
            For <a href="#dfn-td" class="internalDFN"
            data-link-type="dfn">TD</a>s there will be registered
            media types, so applications will be able to check
            whether an <code>href</code> link points to a <a href=
            "#dfn-td" class="internalDFN" data-link-type=
            "dfn">TD</a>, i.e. whether the link is fetcheable with
            this API.
          </li>
        </ul>
      </section>
    </section>
  </section>
  <section data-dfn-for="Observable" class="informative" id=
  "observables">
    <!--OddPage-->
    <h2 id="x7-observables"><span class="secno">7.</span>
    Observables</h2>
    <p><em>This section is non-normative.</em></p>
    <p><dfn data-dfn-type="dfn" id=
    "dfn-observables">Observables</dfn> are <a href=
    "https://github.com/tc39/proposal-observable">proposed</a> to
    be included in ECMAScript and are used for handling pushed data
    associated with various possible sources, for instance events,
    timers, streams, etc. A minimal required implementation is
    described here.</p>
    <div class="ednote">
      <div role="heading" class="ednote-title marker" id=
      "h-ednote-10" aria-level="3">
        <span>Editor's note</span>
      </div>
      <p class="">This section is informal and contains rather
      laconic information for implementations on what to support
      for interoperability.</p>
    </div>
    <div>
      <pre class="def idl"><span class="idlInterface" id=
      "idl-def-observable" data-idl="" data-title=
      "Observable">interface <span class=
      "idlInterfaceID"><a data-no-default="" data-link-for=""
      data-lt="" href="#dom-observable" class="internalDFN"
      data-link-type="dfn"><code>Observable</code></a></span> {
<span class="idlMethod" id=
"idl-def-observable-subscribe-next-error-complete" data-idl=""
data-title="subscribe" data-dfn-for="observable">    <span class=
"idlMethType"><a href="#dom-subscription" class="internalDFN"
data-link-type=
"dfn"><code>Subscription</code></a></span> <span class=
"idlMethName"><a data-no-default="" data-link-for="observable"
data-lt="subscribe|subscribe()" href="#dom-observable-subscribe"
class="internalDFN" data-link-type=
"dfn"><code>subscribe</code></a></span>(<span class=
"idlParam"><span class="idlParamType">(<a href="#dom-observer"
class="internalDFN" data-link-type=
"dfn"><code>Observer</code></a> or <a href="#dom-onnext" class=
"internalDFN" data-link-type=
"dfn"><code>OnNext</code></a>)</span> <span class=
"idlParamName">next</span></span>,
                           <span class=
"idlParam">optional <span class="idlParamType"><a href=
"#dom-onerror" class="internalDFN" data-link-type=
"dfn"><code>OnError</code></a></span> <span class=
"idlParamName">error</span></span>,
                           <span class=
"idlParam">optional <span class="idlParamType"><a href=
"#dom-oncomplete" class="internalDFN" data-link-type=
"dfn"><code>OnComplete</code></a></span> <span class=
"idlParamName">complete</span></span>);</span>
};</span>

<span class="idlInterface" id="idl-def-subscription" data-idl=""
data-title="Subscription">interface <span class=
"idlInterfaceID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-subscription" class="internalDFN" data-link-type=
"dfn"><code>Subscription</code></a></span> {
<span class="idlMethod" id="idl-def-subscription-unsubscribe"
data-idl="" data-title="unsubscribe" data-dfn-for=
"subscription">    <span class=
"idlMethType">void</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="subscription"
data-lt="unsubscribe|unsubscribe()" href=
"#dom-subscription-unsubscribe" class="internalDFN" data-link-type=
"dfn"><code>unsubscribe</code></a></span>();</span>
<span class="idlAttribute" id="idl-def-subscription-closed"
data-idl="" data-title="closed" data-dfn-for=
"subscription">    readonly attribute <span class=
"idlAttrType"><a href=
"https://heycam.github.io/webidl/#idl-boolean">boolean</a></span> <span class="idlAttrName"><a data-no-default=""
data-link-for="subscription" data-lt="" href=
"#dom-subscription-closed" class="internalDFN" data-link-type=
"dfn"><code>closed</code></a></span>;</span>
};</span>

<span class="idlInterface" id="idl-def-observer" data-idl=""
data-title="Observer">interface <span class=
"idlInterfaceID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-observer" class="internalDFN" data-link-type=
"dfn"><code>Observer</code></a></span> {
<span class="idlMethod" id="idl-def-observer-next-value" data-idl=
"" data-title="next" data-dfn-for="observer">    <span class=
"idlMethType">void</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="observer"
data-lt="next()|next" href="#dom-observer-next" class="internalDFN"
data-link-type="dfn">next</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">value</span></span>);</span>
<span class="idlMethod" id="idl-def-observer-error-error" data-idl=
"" data-title="error" data-dfn-for="observer">    <span class=
"idlMethType">void</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="observer"
data-lt="error()|error" href="#dom-observer-error" class=
"internalDFN" data-link-type="dfn">error</a></span>(<span class=
"idlParam"><span class="idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-Error">Error</a></span> <span class="idlParamName">error</span></span>);</span>
<span class="idlMethod" id="idl-def-observer-complete" data-idl=""
data-title="complete" data-dfn-for="observer">    <span class=
"idlMethType">void</span> <span class=
"idlMethName"><a data-no-default="" data-link-for="observer"
data-lt="complete()|complete" href="#dom-observer-complete" class=
"internalDFN" data-link-type="dfn">complete</a></span>();</span>
};</span>

<span class="idlCallback" id="idl-def-onnext" data-idl=""
data-title="OnNext">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-onnext" class="internalDFN" data-link-type=
"dfn"><code>OnNext</code></a></span> = <span class=
"idlCallbackType">void</span> (<span class="idlParam"><span class=
"idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-any">any</a></span> <span class="idlParamName">value</span></span>);</span>

<span class="idlCallback" id="idl-def-onerror" data-idl=""
data-title="OnError">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-onerror" class="internalDFN" data-link-type=
"dfn"><code>OnError</code></a></span> = <span class=
"idlCallbackType">void</span> (<span class="idlParam"><span class=
"idlParamType"><a href=
"https://heycam.github.io/webidl/#idl-Error">Error</a></span> <span class="idlParamName">error</span></span>);</span>

<span class="idlCallback" id="idl-def-oncomplete" data-idl=""
data-title="OnComplete">callback <span class=
"idlCallbackID"><a data-no-default="" data-link-for="" data-lt=""
href="#dom-oncomplete" class="internalDFN" data-link-type=
"dfn"><code>OnComplete</code></a></span> = <span class=
"idlCallbackType">void</span> ();</span></pre>
    </div>
    <section data-dfn-for="Observer" id="the-observer-interface">
      <h3 id="x7-1-the-observer-interface"><span class=
      "secno">7.1</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-observer" data-idl="" data-title=
      "Observer"><code>Observer</code></dfn> interface</h3>
      <p>The <a href="#dom-observer" class="internalDFN"
      data-link-type="dfn"><code>Observer</code></a> interface
      defines the callbacks needed to handle an <a href=
      "#dom-observable" class="internalDFN" data-link-type=
      "dfn"><code>Observable</code></a>:</p>
      <ul>
        <li>The <dfn data-dfn-for="observer" data-dfn-type="dfn"
        id="dom-observer-next" data-idl="" data-title="next()"
        data-lt="next()|next"><code>next()</code></dfn> function,
        as well as the <dfn data-dfn-for="" data-dfn-type="dfn" id=
        "dom-onnext" data-idl="" data-title=
        "OnNext"><code>OnNext</code></dfn> callback takes the next
        sample for the data in the <code>value</code>
        argument.</li>
        <li>The <dfn data-dfn-for="observer" data-dfn-type="dfn"
        id="dom-observer-error" data-idl="" data-title="error()"
        data-lt="error()|error"><code>error()</code></dfn>
        function, as well as the <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-onerror" data-idl=""
        data-title="OnError"><code>OnError</code></dfn> callback
        takes an error in the <code>value</code> argument. It is
        called when an error occured in producing the data the
        client should know about.</li>
        <li>The <dfn data-dfn-for="observer" data-dfn-type="dfn"
        id="dom-observer-complete" data-idl="" data-title=
        "complete()" data-lt=
        "complete()|complete"><code>complete()</code></dfn>
        function, as well as the <dfn data-dfn-for=""
        data-dfn-type="dfn" id="dom-oncomplete" data-idl=""
        data-title="OnComplete"><code>OnComplete</code></dfn>
        callback is called when the data source has finished
        sending values.</li>
      </ul>
    </section>
    <section data-dfn-for="Subscription" id=
    "the-subscription-interface">
      <h3 id="x7-2-the-subscription-interface"><span class=
      "secno">7.2</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-subscription" data-idl="" data-title=
      "Subscription"><code>Subscription</code></dfn> interface</h3>
      <p>Contains the <dfn data-dfn-for="subscription"
      data-dfn-type="dfn" id="dom-subscription-closed" data-idl=""
      data-title="closed"><code>closed</code></dfn> property of
      type <code>boolean</code> that tells if the subscription is
      closed or active.</p>
      <p>Also, contains the <dfn data-dfn-for="subscription"
      data-dfn-type="dfn" id="dom-subscription-unsubscribe"
      data-idl="" data-title="unsubscribe" data-lt=
      "unsubscribe|unsubscribe()"><code>unsubscribe</code></dfn>()
      method that cancels the subscription, i.e. makes a request to
      the underlying platform to stop receiving data from the
      source, and sets the <code>closed</code> property to
      <code>false</code>.</p>
    </section>
    <section data-dfn-for="Observable" id=
    "the-observable-interface">
      <h3 id="x7-3-the-observable-interface"><span class=
      "secno">7.3</span> The <dfn data-dfn-for="" data-dfn-type=
      "dfn" id="dom-observable" data-idl="" data-title=
      "Observable"><code>Observable</code></dfn> interface</h3>
      <p>The <a href="#dom-observable" class="internalDFN"
      data-link-type="dfn"><code>Observable</code></a> interface
      enabled subscribing to pushed data notifications by the
      <dfn data-dfn-for="observable" data-dfn-type="dfn" id=
      "dom-observable-subscribe" data-idl="" data-title="subscribe"
      data-lt=
      "subscribe|subscribe()"><code>subscribe</code></dfn>()
      method:</p>
      <ul>
        <li>If the <code>subscribe()</code> method is called with
        an <a href="#dom-observer" class="internalDFN"
        data-link-type="dfn"><code>Observer</code></a> object,
        initialize the data, error and completion handling
        callbacks from that object, or throw on error.
        </li>
        <li>Otherwise, if the <code>subscribe()</code> method is
        called with a function, initialize the data handler
        callback with that function. If the next argument is
        provided and is a function, initialize the error handling
        callback with that function, or throw on error. If the
        third argument is provided and is a function, initialize
        the completion handler with that function, or throw on
        error.</li>
        <li>After callback initializations, the implementation
        should request the underlying platform to provide data,
        error and completion notifications for the supported data
        source.</li>
      </ul>
    </section>
  </section>
  <section>
    <!--OddPage-->
    <h2 id="security"><span class="secno">8.</span> Security and
    Privacy</h2>
    <div class="ednote">
      <div role="heading" class="ednote-title marker" id=
      "h-ednote-11" aria-level="3">
        <span>Editor's note</span>
      </div>
      <p class="">Please see the <a href=
      "https://github.com/w3c/wot-security/">WoT Security and
      Privacy</a> repository for work in progress regarding threat
      models, assets, risks, recommended mitigations, and best
      practices for security and privacy for systems using the Web
      of Things. Once complete, security and privacy considerations
      relevant to the Scripting API will be summarized in this
      section.</p>
    </div>
  </section>
  <section id="terminology-and-conventions">
    <!--OddPage-->
    <h2 id="x9-terminology-and-conventions"><span class=
    "secno">9.</span> Terminology and conventions</h2>
    <p>The generic WoT terminology is defined in [<cite><a class=
    "bibref" href=
    "#bib-WOT-ARCHITECTURE">WOT-ARCHITECTURE</a></cite>]:
    <dfn data-lt="things|thing" data-dfn-type="dfn" id=
    "dfn-things">Thing</dfn>, <dfn data-lt=
    "thing descriptions|thing description" data-dfn-type="dfn" id=
    "dfn-thing-descriptions">Thing Description</dfn> (in short
    <dfn data-dfn-type="dfn" id="dfn-td">TD</dfn>),
    <dfn data-dfn-type="dfn" id="dfn-web-of-things">Web of
    Things</dfn> (in short <b><i>WoT</i></b>), <dfn data-dfn-type=
    "dfn" id="dfn-wot-interface">WoT Interface</dfn>,
    <dfn data-dfn-type="dfn" id="dfn-protocol-bindings">Protocol
    Bindings</dfn>, <dfn data-dfn-type="dfn" id=
    "dfn-wot-runtime">WoT Runtime</dfn>, <dfn data-lt=
    "consume|consume a td|consuming a td|consuming a thing description"
    data-dfn-type="dfn" id="dfn-consume">Consuming a Thing
    Description</dfn>, <dfn data-dfn-type="dfn" id=
    "dfn-thing-directory">Thing Directory</dfn>,
    <dfn data-dfn-type="dfn" id="dfn-wot-interactions">WoT
    Interactions</dfn>, <dfn data-lt="properties|property"
    data-dfn-type="dfn" id="dfn-properties">Property</dfn>,
    <dfn data-lt="actions|action" data-dfn-type="dfn" id=
    "dfn-actions">Action</dfn>, <dfn data-lt=
    "events|wot-event|event" data-dfn-type="dfn" id=
    "dfn-events">Event</dfn> etc.</p>
    <p><dfn data-dfn-type="dfn" id="dfn-json-ld">JSON-LD</dfn> is
    defined in [<cite><a class="bibref" href=
    "#bib-JSON-LD">JSON-LD</a></cite>] as a JSON document that is
    augmented with support for Linked Data by providing a
    <code>@context</code> property with a defining URI .</p>
    <p>The terms <a href=
    "http://www.w3.org/TR/url-1/"><dfn data-dfn-type="dfn" id=
    "dfn-url">URL</dfn></a> and <a href=
    "https://url.spec.whatwg.org/#concept-url-path"><dfn data-dfn-type="dfn"
    id="dfn-url-path">URL path</dfn></a> are defined in
    [<cite><a class="bibref" href="#bib-URL">URL</a></cite>].</p>
    <p>The following terms are defined in [<cite><a class="bibref"
    href="#bib-HTML5">HTML5</a></cite>] and are used in the context
    of browser implementations: <a href=
    "https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">
    <dfn data-dfn-type="dfn" id="dfn-browsing-context">browsing
    context</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#top-level-browsing-context"><dfn data-dfn-type="dfn"
    id="dfn-top-level-browsing-context">top-level browsing
    context</dfn></a>, <a href=
    "https://html.spec.whatwg.org/multipage/webappapis.html#global-object">
    <dfn data-dfn-type="dfn" id="dfn-global-object">global
    object</dfn></a>, <a href=
    "http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">
    <dfn data-dfn-type="dfn" id=
    "dfn-incumbent-settings-object">incumbent settings
    object</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#document"><dfn data-dfn-type=
    "dfn" id="dfn-document">Document</dfn></a>, <a href=
    "http://www.w3.org/TR/2011/WD-html5-20110113/urls.html#document-base-url">
    <dfn data-dfn-type="dfn" id="dfn-document-base-url">document
    base URL</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#window"><dfn data-dfn-type="dfn"
    id="dfn-window">Window</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#windowproxy"><dfn data-dfn-type=
    "dfn" id="dfn-windowproxy">WindowProxy</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#origin"><dfn data-dfn-type="dfn"
    id="dfn-origin">origin</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#ascii-serialisation-of-an-origin">
    <dfn data-dfn-type="dfn" id="dfn-ascii-serialized-origin">ASCII
    serialized origin</dfn></a>, executing algorithms <a href=
    "https://html.spec.whatwg.org/#in-parallel"><dfn data-dfn-type=
    "dfn" id="dfn-in-parallel">in parallel</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#queue-a-task"><dfn data-dfn-type="dfn"
    id="dfn-queue-a-task">queue a task</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#task-source"><dfn data-dfn-type=
    "dfn" id="dfn-task-source">task source</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#the-iframe-element"><dfn data-dfn-type="dfn"
    id="dfn-iframe">iframe</dfn></a>, <a href=
    "https://html.spec.whatwg.org/#valid-mime-type"><dfn data-dfn-type="dfn"
    id="dfn-valid-mime-type">valid MIME type</dfn></a>.</p>
    <p>A <a href="#dfn-browsing-context" class="internalDFN"
    data-link-type="dfn">browsing context</a> refers to the
    environment in which <a href="#dfn-document" class=
    "internalDFN" data-link-type="dfn">Document</a> objects are
    presented to the user. A given <a href="#dfn-browsing-context"
    class="internalDFN" data-link-type="dfn">browsing context</a>
    has a single <code><a href="#dfn-windowproxy" class=
    "internalDFN" data-link-type="dfn">WindowProxy</a></code>
    object, but it can have many <code><a href="#dfn-document"
    class="internalDFN" data-link-type="dfn">Document</a></code>
    objects, with their associated <code><a href="#dfn-window"
    class="internalDFN" data-link-type="dfn">Window</a></code>
    objects. The <a href="#dfn-script-execution-context" class=
    "internalDFN" data-link-type="dfn">script execution context</a>
    associated with the <i>browsing context</i> identifies the
    entity which invokes this API, which can be a <i>web app</i>, a
    <i>web page</i>, or an <a href="#dfn-iframe" class=
    "internalDFN" data-link-type="dfn">iframe</a>.</p>
    <p>The term <a href=
    "https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">
    <dfn data-dfn-type="dfn" id="dfn-secure-context">secure
    context</dfn></a> is defined in [<cite><a class="bibref" href=
    "#bib-WEBAPPSEC">WEBAPPSEC</a></cite>].</p>
    <p><a href=
    "https://tc39.github.io/ecma262/#sec-error-objects"><dfn data-dfn-type="dfn"
    id="dfn-error">Error</dfn>, <dfn data-dfn-type="dfn" id=
    "dfn-evalerror">EvalError</dfn>, <dfn data-dfn-type="dfn" id=
    "dfn-rangeerror">RangeError</dfn>, <dfn data-dfn-type="dfn" id=
    "dfn-referenceerror">ReferenceError</dfn>, <dfn data-dfn-type=
    "dfn" id="dfn-syntaxerror">SyntaxError</dfn>,
    <dfn data-dfn-type="dfn" id="dfn-typeerror">TypeError</dfn>,
    <dfn data-dfn-type="dfn" id="dfn-urierror">URIError</dfn></a> ,
    <a href=
    "https://tc39.github.io/ecma262/#sec-execution-contexts"><dfn data-dfn-type="dfn"
    id="dfn-script-execution-context">script execution
    context</dfn></a>, <a href=
    "http://www.ecma-international.org/ecma-262/6.0/#sec-promise-objects">
    <dfn data-dfn-type="dfn" id="dfn-promise">Promise</dfn></a>,
    <a href=
    "http://www.ecma-international.org/ecma-262/6.0/#sec-json-object">
    <dfn data-dfn-type="dfn" id="dfn-json">JSON</dfn></a>, <a href=
    "http://www.ecma-international.org/ecma-262/6.0/#sec-json.stringify">
    <dfn data-dfn-type="dfn" id=
    "dfn-json-stringify">JSON.stringify</dfn></a> and <a href=
    "http://www.ecma-international.org/ecma-262/6.0/#sec-json.parse">
    <dfn data-dfn-type="dfn" id=
    "dfn-json-parse">JSON.parse</dfn></a> are defined in
    [<cite><a class="bibref" href=
    "#bib-ECMASCRIPT">ECMASCRIPT</a></cite>].</p>
    <p><a href=
    "http://heycam.github.io/webidl/#idl-DOMString"><dfn data-dfn-type="dfn"
    id="dfn-domstring">DOMString</dfn></a>, <a href=
    "https://heycam.github.io/webidl/#idl-USVString"><dfn data-dfn-type="dfn"
    id="dfn-usvstring">USVString</dfn></a>, <a href=
    "http://heycam.github.io/webidl/#idl-ArrayBuffer"><dfn data-dfn-type="dfn"
    id="dfn-arraybuffer">ArrayBuffer</dfn></a>, <a href=
    "http://heycam.github.io/webidl/#common-BufferSource"><dfn data-dfn-type="dfn"
    id="dfn-buffersource">BufferSource</dfn></a> and <a href=
    "http://heycam.github.io/webidl/#idl-any"><dfn data-dfn-type=
    "dfn" id="dfn-any-0">any</dfn></a> are defined in
    [<cite><a class="bibref" href=
    "#bib-WEBIDL">WEBIDL</a></cite>].</p>
    <p>The algorithms <a href=
    "http://www.w3.org/TR/encoding/#utf-8-encode"><dfn data-dfn-type="dfn"
    id="dfn-utf-8-encode">utf-8 encode</dfn></a>, and <a href=
    "http://www.w3.org/TR/encoding/#utf-8-decode"><dfn data-dfn-type="dfn"
    id="dfn-utf-8-decode">utf-8 decode</dfn></a> are defined in
    [<cite><a class="bibref" href=
    "#bib-ENCODING">ENCODING</a></cite>].</p>
    <p><dfn data-dfn-type="dfn" id="dfn-iana-media-type">IANA media
    type</dfn>s (formerly known as MIME types) are defined in
    <a href="http://tools.ietf.org/html/rfc2046">RFC2046</a>.</p>
    <p>The terms <dfn data-dfn-type="dfn" id=
    "dfn-hyperlink-reference">hyperlink reference</dfn> and
    <dfn data-dfn-type="dfn" id="dfn-relation-type">relation
    type</dfn> are defined in [<cite><a class="bibref" href=
    "#bib-HTML5">HTML5</a></cite>] and <a href=
    "https://tools.ietf.org/html/rfc8288">RFC8288</a>.</p>
  </section>
  <section id="conformance">
    <!--OddPage-->
    <h2 id="x10-conformance"><span class="secno">10.</span>
    Conformance</h2>
    <p>As well as sections marked as non-normative, all authoring
    guidelines, diagrams, examples, and notes in this specification
    are non-normative. Everything else in this specification is
    normative.</p>
    <p id="respecRFC2119">The key words <em class=
    "rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and
    <em class="rfc2119">SHOULD</em> are to be interpreted as
    described in [<cite><a class="bibref" href=
    "#bib-RFC2119">RFC2119</a></cite>].</p>
    <p>This document defines conformance criteria that apply to a
    single product: the <dfn data-dfn-type="dfn" id=
    "dfn-ua">UA</dfn> (user agent) that implements the interfaces
    it contains.</p>
    <p>This specification can be used for implementing the WoT
    Scripting API in multiple programming languages. The interface
    definitions are specified in [<cite><a class="bibref" href=
    "#bib-WEBIDL">WEBIDL</a></cite>].</p>
    <p>The user agent (UA) may be implemented in the browser, or in
    a separate runtime environment, such as <a href=
    "https://nodejs.org/en/">Node.js</a> or small embedded
    runtimes.</p>
    <p>Implementations that use ECMAScript executed in a browser to
    implement the APIs defined in this document <em class="rfc2119"
    title="MUST">MUST</em> implement them in a manner consistent
    with the ECMAScript Bindings defined in the Web IDL
    specification [<cite><a class="bibref" href=
    "#bib-WEBIDL">WEBIDL</a></cite>].</p>
    <p>Implementations that use TypeScript or ECMAScript in a
    runtime to implement the APIs defined in this document
    <em class="rfc2119" title="MUST">MUST</em> implement them in a
    manner consistent with the TypeScript Bindings defined in the
    TypeScript specification [<cite><a class="bibref" href=
    "#bib-TYPESCRIPT">TYPESCRIPT</a></cite>].</p>
    <p>This document serves a general description of the WoT
    Scripting API. Language and runtime specific issues are
    discussed in separate extensions of this document.</p>
  </section>
  <section class="appendix" id="Changes">
    <!--OddPage-->
    <h2 id="a-changes"><span class="secno">A.</span> Changes</h2>
    <p>The following is a list of major changes to the document.
    For a complete list of changes, see the <a href=
    "https://github.com/w3c/wot-scripting-api/commits/master">github
    change log</a>. You can also view the <a href=
    "https://github.com/w3c/wot-scripting-api/issues?page=1&amp;state=closed">
    recently closed bugs</a>.</p>
    <ul>
      <li>Synchronized the Scripting API with the
        <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/">
      Thing Description specification</a>. Defined
      <code>ThingDescription</code>, <code>ThingTemplate</code>,
      <code>SemanticAnnotations</code>, <code>SemanticType</code>,
      <code>SemanticMetadata</code>, input and output data
      descriptions, etc.
      </li>
      <li>Separated <code>consume()</code> to <code>fetch()</code>
      and <code>consume()</code>.</li>
      <li>Changed <code>expose()</code> to accept a <a class=
      "respec-offending-element" title=
      "Linking error: not matching &lt;dfn&gt;">Thing Template</a>.
      </li>
      <li>Instead of <code>addListener()</code>,
      <code>removeListener()</code> introduced
      <code>onEvent()</code>, <code>onPropertyChange()</code>,
      <code>onTDChange()</code>.</li>
      <li>Revised <code>ExposedThing</code> handlers for Property,
      Action and Event.</li>
      <li>Added an informal section on <a href="#dfn-td" class=
      "internalDFN" data-link-type="dfn">TD</a> introspection.
      </li>
      <li>Added informal section for <code>Observable</code>.</li>
    </ul>
  </section>
  <section>
    <!--OddPage-->
    <h2 class="appendix" id="openissues"><span class=
    "secno">B.</span> Open issues</h2>
    <p>The following problems are being discussed and need most
    attention:</p>
    <ul>
      <li>Revised API for tracking the <a href="#dfn-td" class=
      "internalDFN" data-link-type="dfn">TD</a> better (<a href=
      "https://github.com/w3c/wot-scripting-api/issues/96)">https://github.com/w3c/wot-scripting-api/issues/96)</a>.
      </li>
      <li>Security related metadata (<a href=
      "https://github.com/w3c/wot-scripting-api/issues/91)">https://github.com/w3c/wot-scripting-api/issues/91)</a>.
      </li>
      <li>Defining <code>DataSchema</code> better (<a href=
      "https://github.com/w3c/wot-scripting-api/issues/89)">https://github.com/w3c/wot-scripting-api/issues/89)</a>.
      </li>
      <li>Providing Protocol Binding for <a href=
      "#dom-exposedthing" class="internalDFN" data-link-type="dfn">
        <code>ExposedThing</code></a> (<a href=
        "https://github.com/w3c/wot-scripting-api/issues/45)">https://github.com/w3c/wot-scripting-api/issues/45)</a>.
      </li>
      <li>Retrieving information from Thing Description (<a href=
      "https://github.com/w3c/wot-scripting-api/issues/38">https://github.com/w3c/wot-scripting-api/issues/38</a>)
      </li>
      <li>Script management and runtime related issues (<a href=
      "https://github.com/w3c/wot-scripting-api/issues/">https://github.com/w3c/wot-scripting-api/issues/</a>)
      </li>
    </ul>
  </section>
  <section id="acknowledgements">
    <!--OddPage-->
    <h2 id="c-acknowledgements"><span class="secno">C.</span>
    Acknowledgements</h2>
    <p>Special thanks to former editor Johannes Hund (until August
    2017, when at Siemens AG) for developing this specification.
    Also, the editors would like to thank Dave Raggett, Matthias
    Kovatsch, Michael Koster and Michael McCool for their comments
    and guidance.</p>
  </section>
  <section id="references" class="appendix">
    <!--OddPage-->
    <h2 id="d-references"><span class="secno">D.</span>
    References</h2>
    <section id="normative-references">
      <h3 id="d-1-normative-references"><span class=
      "secno">D.1</span> Normative references</h3>
      <dl class="bibliography">
        <dt id="bib-ECMASCRIPT">[ECMASCRIPT]</dt>
        <dd>
          <a href=
          "https://tc39.github.io/ecma262/"><cite>ECMAScript
          Language Specification</cite></a>. Ecma International.
          URL: <a href=
          "https://tc39.github.io/ecma262/">https://tc39.github.io/ecma262/</a>
        </dd>
        <dt id="bib-ENCODING">[ENCODING]</dt>
        <dd>
          <a href=
          "https://www.w3.org/TR/encoding/"><cite>Encoding</cite></a>.
          Anne van Kesteren; Joshua Bell; Addison Phillips. W3C. 15
          December 2016. W3C Candidate Recommendation. URL:
          <a href="https://www.w3.org/TR/encoding/">https://www.w3.org/TR/encoding/</a>
        </dd>
        <dt id="bib-HTML5">[HTML5]</dt>
        <dd>
          <a href=
          "https://www.w3.org/TR/html5/"><cite>HTML5</cite></a>.
          Ian Hickson; Robin Berjon; Steve Faulkner; Travis
          Leithead; Erika Doyle Navara; Theresa O'Connor; Silvia
          Pfeiffer. W3C. 28 October 2014. W3C Recommendation. URL:
          <a href=
          "https://www.w3.org/TR/html5/">https://www.w3.org/TR/html5/</a>
        </dd>
        <dt id="bib-JSON-LD">[JSON-LD]</dt>
        <dd>
          <a href="https://www.w3.org/TR/json-ld/"><cite>JSON-LD
          1.0</cite></a>. Manu Sporny; Gregg Kellogg; Markus
          Lanthaler. W3C. 16 January 2014. W3C Recommendation. URL:
          <a href=
          "https://www.w3.org/TR/json-ld/">https://www.w3.org/TR/json-ld/</a>
        </dd>
        <dt id="bib-RFC2119">[RFC2119]</dt>
        <dd>
          <a href="https://tools.ietf.org/html/rfc2119"><cite>Key
          words for use in RFCs to Indicate Requirement
          Levels</cite></a>. S. Bradner. IETF. March 1997. Best
          Current Practice. URL: <a href=
          "https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
        </dd>
        <dt id="bib-TYPESCRIPT">[TYPESCRIPT]</dt>
        <dd>
          <a href=
          "https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md">
          <cite>TypeScript Language Specification</cite></a>.
          Microsoft. 1 October 2012. URL: <a href=
          "https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md">
          https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md</a>
        </dd>
        <dt id="bib-URL">[URL]</dt>
        <dd>
          <a href="https://url.spec.whatwg.org/"><cite>URL
          Standard</cite></a>. Anne van Kesteren. WHATWG. Living
          Standard. URL: <a href=
          "https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
        </dd>
        <dt id="bib-WEBAPPSEC">[WEBAPPSEC]</dt>
        <dd>
          <a href=
          "https://w3c.github.io/webappsec/specs/powerfulfeatures"><cite>
          Secure Contexts</cite></a>. W3C. 17 July 2015. URL:
          <a href=
          "https://w3c.github.io/webappsec/specs/powerfulfeatures">https://w3c.github.io/webappsec/specs/powerfulfeatures</a>
        </dd>
        <dt id="bib-WEBIDL">[WEBIDL]</dt>
        <dd>
          <a href="https://heycam.github.io/webidl/"><cite>Web
          IDL</cite></a>. Cameron McCormack; Boris Zbarsky; Tobie
          Langel. W3C. 15 December 2016. W3C Editor's Draft. URL:
          <a href=
          "https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
        </dd>
        <dt id="bib-WOT-ARCHITECTURE">[WOT-ARCHITECTURE]</dt>
        <dd>
          <a href=
          "https://w3c.github.io/wot-architecture/"><cite>Web of
          Things Architecture</cite></a>. W3C. 20 August 2017. URL:
          <a href=
          "https://w3c.github.io/wot-architecture/">https://w3c.github.io/wot-architecture/</a>
        </dd>
      </dl>
    </section>
    <section id="informative-references">
      <h3 id="d-2-informative-references"><span class=
      "secno">D.2</span> Informative references</h3>
      <dl class="bibliography">
        <dt id="bib-WOT-TD">[WOT-TD]</dt>
        <dd>
        <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/">
          <cite>WoT Thing Description</cite></a> . W3C. 20 August 2017. URL:
        <a href="https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/">
        https://www.w3.org/TR/2018/WD-wot-thing-description-20180405/</a>
        </dd>
      </dl>
    </section>
  </section>
  <p role="navigation" id="back-to-top"><a href="#toc"><abbr title=
  "Back to top">↑</abbr></a></p>
  <script src="https://www.w3.org/scripts/TR/2016/fixup.js">
  </script>
</body>
</html>
